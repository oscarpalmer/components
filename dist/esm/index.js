var R=Object.defineProperty;var O=(r,e,t)=>e in r?R(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var b=(r,e,t)=>(O(r,typeof e!="symbol"?e+"":e,t),t);var a={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}},x=["[href]","[tabindex]","button","input","select","textarea"].map(r=>`${r}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",");function p(r){return requestAnimationFrame?.(r)??setTimeout?.(()=>{r(Date.now())},16)}function D(r,e){let t=r?.parentElement;for(;t!=null;){if(t===document.body)return;if(e(t))break;t=t.parentElement}return t??void 0}function A(r){let e=[],t=Array.from(r.querySelectorAll(x));for(let i of t){let n=window?.getComputedStyle?.(i);(n==null||n.display!=="none"&&n.visibility!=="hidden")&&e.push(i)}return e}function P(){return URL.createObjectURL(new Blob).replace(/^.*\/([\w-]+)$/,"$1").replace(/-/g,"_")}var c=class{static getChildren(e){return Array.from(e.querySelectorAll(":scope > delicious-details > details, :scope > details"))}static onKeydown(e){if(e.isComposing||e.key!=="ArrowDown"&&e.key!=="ArrowUp"||!(this instanceof H))return;let{target:t}=e;if(!(t instanceof HTMLElement))return;let i=d.list.children.get(this)??[],n=t.parentElement,s=i.indexOf(n);if(s===-1)return;let o=s+(e.key==="ArrowDown"?1:-1);o<0?o=i.length-1:o>=i.length&&(o=0),i[o]?.querySelector(":scope > summary")?.focus()}static onKeyup(e){if(e.key!=="Escape")return;let{containers:t}=d.details,i=D(document.activeElement,n=>t.has(n)&&(t.get(n)?.open??!0));i instanceof M&&c.onToggle.call(i,!1)}static onToggle(e){if(!(this instanceof M))return;let{buttons:t,containers:i}=d.details,n=i.get(this);n!=null&&(n.open=e??!n.open,n.open||t.get(this)?.focus())}static open(e,t){if(t==null)return;if(t.length>0&&!/^[\s\d,]+$/.test(t))throw new Error("The 'selected'-attribute of a 'delicious-details-list'-element must be a comma-separated string of numbers, e.g. '', '0' or '0,1,2'");let i=t.length>0?t.split(",").filter(n=>n.trim().length>0).map(n=>Number.parseInt(n,10)):[];c.update(e,i)}static update(e,t){if(typeof t>"u")return;let{children:i,observer:n,open:s}=d.list,o=t.filter((u,f,g)=>g.indexOf(u)===f).sort((u,f)=>u-f);if(e.multiple||(o=o.length>0&&o[0]!=null?o.length>1?[o[0]]:o:[]),o.every((u,f)=>e.open[f]===u))return;n.get(e)?.disconnect();let l=i.get(e)??[];for(let u of l)o.includes(l.indexOf(u))!==u.open&&(u.open=!u.open);s.set(e,o),p(()=>{o.length===0?e.removeAttribute("open"):e.setAttribute("open",o.join(",")),p(()=>n.get(e)?.observe(e,k.options))})}},k=class{static callback(e,t){if(t.length===0)return;let{children:i}=d.list,n=t[0],s=Array.from(n?.addedNodes??[]),o=Array.from(n?.removedNodes??[]);if(s.concat(o).some(C=>C.parentElement===e)){i.set(e,c.getChildren(e));return}if(n?.type!=="attributes"||!(n?.target instanceof HTMLDetailsElement))return;let l=n.target,f=(i.get(e)??[]).indexOf(l);if(f===-1)return;let g=[];e.multiple?g=l.open?e.open.concat([f]):e.open.filter(C=>C!==f):g=l.open?[f]:[],c.update(e,g)}};b(k,"options",{attributeFilter:["open"],attributes:!0,childList:!0,subtree:!0});var d=class{};b(d,"details",{buttons:new WeakMap,containers:new WeakMap}),b(d,"list",{children:new WeakMap,observer:new WeakMap,open:new WeakMap});var M=class extends HTMLElement{close(){c.onToggle.call(this,!1)}connectedCallback(){let e=this.querySelector(":scope > details"),t=e?.querySelector(":scope > summary");d.details.buttons.set(this,t),d.details.containers.set(this,e)}disconnectedCallback(){d.details.buttons.delete(this),d.details.containers.delete(this)}open(){c.onToggle.call(this,!0)}toggle(){c.onToggle.call(this)}},H=class extends HTMLElement{static get observedAttributes(){return["multiple","open"]}get multiple(){return this.getAttribute("multiple")!=null}set multiple(e){e?this.setAttribute("multiple",""):this.removeAttribute("multiple")}get open(){return d.list.open.get(this)??[]}set open(e){c.update(this,e)}attributeChangedCallback(e,t,i){if(t!==i)switch(e){case"multiple":c.open(this,this.getAttribute("open")??void 0);break;case"open":c.open(this,i);break;default:break}}connectedCallback(){let{children:e,observer:t,open:i}=d.list;e.set(this,c.getChildren(this)),i.set(this,[]),t.set(this,new MutationObserver(n=>{k.callback(this,n)})),t.get(this)?.observe(this,k.options),this.addEventListener("keydown",c.onKeydown.bind(this),a.passive),c.open(this,this.getAttribute("open")??void 0)}disconnectedCallback(){let{children:e,observer:t,open:i}=d.list;e.delete(this),t.get(this)?.disconnect(),t.delete(this),i.delete(this)}};addEventListener?.("keyup",c.onKeyup,a.passive);customElements?.define("delicious-details",M);customElements?.define("delicious-details-list",H);var v=class{static setCoordinate(e,t){let{left:i,top:n}=t;e.style.inset="0 auto auto 0",e.style.position="fixed",e.style.transform=`translate3d(${i}px, ${n}px, 0)`,e.hidden&&p(()=>{e.hidden=!1})}static update(e,t,i,n){let{anchor:s,floater:o,parent:l}=e;function u(){if(n())return;let f=v.getPosition(l??s,t);o.setAttribute("position",f);let g=i(f,{anchor:s.getBoundingClientRect(),floater:o.getBoundingClientRect(),parent:l?.getBoundingClientRect()});v.setCoordinate(o,g),p(u)}p(u)}static getPosition(e,t){let n=e.getAttribute("position")?.trim().toLowerCase();return n!=null&&t.all.includes(n)?n:t.default}};var W=["any"].concat(...["above","below"].map(r=>[r,`${r}-left`,`${r}-right`])),h=class{static getCoordinate(e,t){return{left:h.getLeft(e,t),top:h.getTop(e,t)}}static getLeft(e,t){let{left:i,right:n}=t.anchor,{width:s}=t.floater,o=i+s,l=n-s;return e.includes("left")||e.includes("right")?e.includes("left")?i:n-s:o>window.innerWidth?l<0?i:n-s:i}static getTop(e,t){let{bottom:i,top:n}=t.anchor,{height:s}=t.floater,o=i+s,l=n-s;return e.includes("above")||e.includes("below")?e.includes("above")?n-s:i:o>window.innerHeight?l<0?i:l:i}static onClick(e){if(!(this instanceof L))return;let{anchor:t,floater:i}=m.getElements(this);t==null||i==null||t.getAttribute("aria-expanded")!=="true"||e.target!==t&&e.target!==i&&!(i?.contains(e.target)??!1)&&h.toggle.call(this,!1)}static onKeydown(e){if(!(this instanceof L)||!(e instanceof KeyboardEvent))return;let{anchor:t,floater:i}=m.getElements(this);if(t==null||i==null||t.getAttribute("aria-expanded")!=="true"||(e.key==="Escape"&&h.toggle.call(this,!1),e.key!=="Tab"))return;e.preventDefault();let n=A(i);if(document.activeElement===i){p(()=>{(n[e.shiftKey?n.length-1:0]??i).focus()});return}let s=n.indexOf(document.activeElement),o=i;if(s>-1){let l=s+(e.shiftKey?-1:1);l<0?l=n.length-1:l>=n.length&&(l=0),o=n[l]??i}p(()=>{o.focus()})}static toggle(e){if(!(this instanceof L))return;let{anchor:t,floater:i}=m.getElements(this);if(t==null||i==null)return;let n=typeof e=="boolean"?!e:t.getAttribute("aria-expanded")==="true",{click:s,keydown:o}=m.getCallbacks(this),l=n?"removeEventListener":"addEventListener";s!=null&&document[l]("click",s,a.passive),o!=null&&document[l]("keydown",o,a.active),n?i.parentElement?.removeChild(i):document.body.appendChild(i),t.setAttribute("aria-expanded",String(!n)),(n?t:A(i)[0]??i).focus(),v.update({anchor:t,floater:i,parent:this},{all:W,default:"below"},h.getCoordinate,()=>t.getAttribute("aria-expanded")!=="true")}},m=class{static getCallbacks(e){return{click:this.values.click.get(e),keydown:this.values.keydown.get(e)}}static getElements(e){return{anchor:this.values.anchors.get(e),floater:this.values.floaters.get(e)}}static remove(e){this.values.anchors.delete(e),this.values.click.delete(e),this.values.floaters.delete(e),this.values.keydown.delete(e)}static setCallbacks(e){this.values.click?.set(e,h.onClick.bind(e)),this.values.keydown?.set(e,h.onKeydown.bind(e))}static setElements(e,t,i){this.values.anchors?.set(e,t),this.values.floaters?.set(e,i)}};b(m,"values",{anchors:new WeakMap,click:new WeakMap,floaters:new WeakMap,keydown:new WeakMap});var L=class extends HTMLElement{close(){h.toggle.call(this,!1)}connectedCallback(){let e=this.querySelector(":scope > [polite-popover-button]"),t=this.querySelector(":scope > [polite-popover-content]");if(e==null)throw new Error("a");if(!(e instanceof HTMLButtonElement)&&e.getAttribute("role")!=="button")throw new Error("b");if(t==null)throw new Error("c");t.parentElement?.removeChild(t),t.id||t.setAttribute("id",P()),v.setCoordinate(t,{left:-1e6,top:-1e6}),e.setAttribute("aria-controls",t.id),e.setAttribute("aria-expanded","false"),t.setAttribute("tabindex","-1"),m.setElements(this,e,t),m.setCallbacks(this),e.addEventListener("click",h.toggle.bind(this),a.passive)}disconnectedCallback(){m.remove(this)}open(){h.toggle.call(this,!0)}toggle(){h.toggle.call(this)}};customElements?.define("polite-popover",L);var T="toasty-tooltip",K=["above","below","horizontal","left","right","vertical"],y=class{static getCoordinate(e,t){return{left:y.getLeft(e,t),top:y.gettop(e,t)}}static getLeft(e,t){let{left:i,right:n}=t.anchor,{width:s}=t.floater,o=n+s,l=i-s;return e==="horizontal"?o>window.innerWidth?l<0?n:l:n:e==="left"||e==="right"?e==="left"?i-s:n:i+t.anchor.width/2-s/2}static gettop(e,t){let{bottom:i,top:n}=t.anchor,{height:s}=t.floater,o=i+s,l=n-s;return e==="vertical"?o>window.innerHeight?l<0?i:l:i:e==="above"||e==="below"?e==="above"?n-s:i:n+t.anchor.height/2-s/2}static observer(e){for(let t of e){if(t.type!=="attributes")continue;let i=t.target;if(i.getAttribute(T)==null){w.destroy(i);return}let n=i.getAttribute("aria-describedby")??i.getAttribute("aria-labelledby"),s=n==null?null:document.getElementById(n);s!=null&&w.create(i,s)}}},E=class{};b(E,"elements",new WeakMap);var w=class{constructor(e,t){this.anchor=e;this.focusable=e.matches(x),this.callbacks={click:this.onClick.bind(this),hide:this.onHide.bind(this),key:this.onKey.bind(this),show:this.onShow.bind(this)},this.addCallbacks(),this.floater=this.createFloater(t)}floater;callbacks;focusable;static create(e,t){E.elements.has(e)||E.elements.set(e,new w(e,t))}static destroy(e){let t=E.elements.get(e);t!=null&&(t.removeCallbacks(),E.elements.delete(e))}onClick(){this.onHide()}onHide(){document.removeEventListener("keydown",this.callbacks.key,a.passive),document.removeEventListener("pointerdown",this.callbacks.click,a.active),this.floater.parentElement?.removeChild(this.floater)}onKey(e){e.key==="Escape"&&this.onHide()}onShow(){this.floater.parentElement==null&&(document.addEventListener("keydown",this.callbacks.key,a.passive),document.addEventListener("pointerdown",this.callbacks.click,a.active),document.body.appendChild(this.floater),v.update({anchor:this.anchor,floater:this.floater},{all:K,default:"above"},y.getCoordinate,()=>this.floater.parentElement==null))}addCallbacks(){let{anchor:e,callbacks:t,focusable:i}=this;e.addEventListener("mouseenter",t.show,a.passive),e.addEventListener("mouseleave",t.hide,a.passive),i&&(e.addEventListener("blur",t.hide,a.passive),e.addEventListener("focus",t.show,a.passive))}createFloater(e){let t=document.createElement("div");return t.setAttribute("aria-hidden","true"),t.setAttribute(`${T}-content`,""),t.hidden=!0,t.innerHTML=e.innerHTML,t}removeCallbacks(){let{anchor:e,callbacks:t,focusable:i}=this;e.removeEventListener("mouseenter",t.show,a.passive),e.removeEventListener("mouseleave",t.hide,a.passive),e.removeEventListener("touchstart",t.show,a.passive),i&&(e.removeEventListener("blur",t.hide,a.passive),e.removeEventListener("focus",t.show,a.passive))}},$=new MutationObserver(y.observer);$.observe(document,{attributeFilter:[T],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0});p(()=>{let r=Array.from(document.querySelectorAll(`[${T}]`));for(let e of r)e.setAttribute(T,"")});
