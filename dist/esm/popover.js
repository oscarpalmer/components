var w=Object.defineProperty;var P=(o,e,t)=>e in o?w(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var y=(o,e,t)=>(P(o,typeof e!="symbol"?e+"":e,t),t);var m={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}};function v(o){return requestAnimationFrame?.(o)??setTimeout?.(()=>{o(Date.now())},16)}var L=["[href]","[tabindex]","button","input","select","textarea"].map(o=>`${o}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",");function g(o){let e=[],t=Array.from(o.querySelectorAll(L));for(let n of t){let i=window?.getComputedStyle?.(n);(i==null||i.display!=="none"&&i.visibility!=="hidden")&&e.push(n)}return e}function k(){return URL.createObjectURL(new Blob).replace(/^.*\/([\w-]+)$/,"$1").replace(/-/g,"_")}var x=["any"].concat(...["above","below"].map(o=>[o,`${o}-left`,`${o}-right`])),l=class{static onClick(e){if(!(this instanceof u))return;let{button:t,content:n}=r.getElements(this);t==null||n==null||t.getAttribute("aria-expanded")!=="true"||e.target!==t&&e.target!==n&&!(n?.contains(e.target)??!1)&&l.toggle.call(this,!1)}static onKeydown(e){if(!(this instanceof u)||!(e instanceof KeyboardEvent))return;let{button:t,content:n}=r.getElements(this);if(t==null||n==null||t.getAttribute("aria-expanded")!=="true"||(e.key==="Escape"&&l.toggle.call(this,!1),e.key!=="Tab"))return;e.preventDefault();let i=g(n);if(document.activeElement===n){v(()=>{(i[e.shiftKey?i.length-1:0]??n).focus()});return}let s=i.indexOf(document.activeElement),c=n;if(s>-1){let a=s+(e.shiftKey?-1:1);a<0?a=i.length-1:a>=i.length&&(a=0),c=i[a]??n}v(()=>{c.focus()})}static setCoordinates(e,t){e.style.inset="0 auto auto 0",e.style.position="fixed",e.style.transform=`translate3d(${t.x}px, ${t.y}px, 0)`}static toggle(e){if(!(this instanceof u))return;let{button:t,content:n}=r.getElements(this);if(t==null||n==null)return;let i=typeof e=="boolean"?!e:t.getAttribute("aria-expanded")==="true",{click:s,keydown:c}=r.getCallbacks(this),a=i?"removeEventListener":"addEventListener";s!=null&&document[a]("click",s,m.passive),c!=null&&document[a]("keydown",c,m.active),i?n.parentElement?.removeChild(n):document.body.appendChild(n),t.setAttribute("aria-expanded",String(!i)),(i?t:g(n)[0]??n).focus(),l.update(this)}static getCoordinates(e,t,n){let{bottom:i,left:s,right:c,top:a}=t.getBoundingClientRect(),{height:b,width:E}=n.getBoundingClientRect(),p=0,f=0;if(e.includes("above"))f=a-b;else if(e.includes("below"))f=i;else{let h=i+b,d=a-b;f=h>window.innerHeight?d<0?i:d:i}if(e.includes("left"))p=s;else if(e.includes("right"))p=c-E;else{let h=s+E,d=c-E;p=h>window.innerWidth?d<0?s:d:s}return{x:p,y:f}}static getPosition(e){let n=e.getAttribute("position")?.trim().toLowerCase();return n!=null&&x.includes(n)?n:"below"}static update(e){let{button:t,content:n}=r.getElements(e);if(t==null||n==null)return;function i(){if(t?.getAttribute("aria-expanded")!=="true"||n==null)return;let s=l.getPosition(e),c=l.getCoordinates(s,t,n);l.setCoordinates(n,c),v(i)}v(i)}},r=class{static getCallbacks(e){return{click:this.values.click.get(e),keydown:this.values.keydown.get(e)}}static getElements(e){return{button:this.values.buttons.get(e),content:this.values.content.get(e)}}static remove(e){this.values.buttons.delete(e),this.values.click.delete(e),this.values.content.delete(e),this.values.keydown.delete(e)}static setCallbacks(e){this.values.click?.set(e,l.onClick.bind(e)),this.values.keydown?.set(e,l.onKeydown.bind(e))}static setElements(e,t,n){this.values.buttons?.set(e,t),this.values.content?.set(e,n)}};y(r,"values",{buttons:new WeakMap,click:new WeakMap,content:new WeakMap,keydown:new WeakMap});var u=class extends HTMLElement{close(){l.toggle.call(this,!1)}connectedCallback(){let e=this.querySelector(":scope > [polite-popover-button]"),t=this.querySelector(":scope > [polite-popover-content]");if(e==null)throw new Error("a");if(!(e instanceof HTMLButtonElement)&&e.getAttribute("role")!=="button")throw new Error("b");if(t==null)throw new Error("c");t.parentElement?.removeChild(t),t.id||t.setAttribute("id",k()),l.setCoordinates(t,{x:-1e5,y:-1e5}),e.setAttribute("aria-controls",t.id),e.setAttribute("aria-expanded","false"),t.setAttribute("tabindex","-1"),r.setElements(this,e,t),r.setCallbacks(this),e.addEventListener("click",l.toggle.bind(this),m.passive)}disconnectedCallback(){r.remove(this)}open(){l.toggle.call(this,!0)}toggle(){l.toggle.call(this)}};customElements?.define("polite-popover",u);
