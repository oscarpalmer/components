var M=Object.defineProperty;var L=(i,e,t)=>e in i?M(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var y=(i,e,t)=>(L(i,typeof e!="symbol"?e+"":e,t),t);var h={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}},H=["[href]","[tabindex]","button","input","select","textarea"].map(i=>`${i}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",");function d(i){return requestAnimationFrame?.(i)??setTimeout?.(()=>{i(Date.now())},16)}function P(i,e,t){let n=i.getAttribute(e);return n==null||n.trim().length===0?t:n}function E(i){let e=[],t=Array.from(i.querySelectorAll(H));for(let n of t){let o=window?.getComputedStyle?.(n);(typeof o>"u"||o.display!=="none"&&o.visibility!=="hidden")&&e.push(n)}return e}function k(){return URL.createObjectURL(new Blob).replace(/^.*\/([\w-]+)$/,"$1").replace(/-/g,"_")}function w(i,e,t){typeof t=="boolean"&&i?.setAttribute(e,String(t))}var p=class{static update(e,t,n){let{anchor:o,floater:s,parent:r}=e,{after:a,getPosition:u,validate:m}=n;function g(){if(!m())return;let b=p.getType(r??o,t),T=u(b,{anchor:o.getBoundingClientRect(),floater:s.getBoundingClientRect(),parent:r?.getBoundingClientRect()});p.setPosition(s,T),a?.(),d(g)}d(g)}static getType(e,t){let n=P(e,"position",t.default);return t.all.includes(n)?n:t.default}static setPosition(e,t){let{left:n,top:o}=t.coordinate;e.setAttribute("position",t.type),e.style.inset="0 auto auto 0",e.style.position="fixed",e.style.transform=`translate3d(${n}px, ${o}px, 0)`,e.hidden&&d(()=>{e.hidden=!1})}};var x=["any"].concat(...["above","below"].map(i=>[i,`${i}-left`,`${i}-right`])),l=class{static getPosition(e,t){let n=l.getValue(e,["left","right"],t,!0),o=l.getValue(e,["below","above"],t,!1),s=t.anchor.left===n?"left":"right";if(e!=="any")return{coordinate:{left:n,top:o},type:["above","below"].includes(e)?`${e}-${s}`:e};let r=t.anchor.bottom===o?"below":"above";return{coordinate:{left:n,top:o},type:`${r}-${s}`}}static getValue(e,t,n,o){let{anchor:s,floater:r}=n,a=o?r.width:r.height,u=o?s.left:s.bottom,m=(o?s.right:s.top)-a;return t.some(b=>e.includes(b))?e.includes(t[0]??"_")?u:m:u+a<=(o?window.innerWidth:window.innerHeight)||m<0?u:m}static initialize(e,t,n){n.hidden=!0,n.id||n.setAttribute("id",k()),t.setAttribute("aria-controls",n.id),t.setAttribute("aria-expanded","false"),n.setAttribute("tabindex","-1"),t.addEventListener("click",l.toggle.bind(e),h.passive),c.add(e,t,n)}static onClick(e){if(!(this instanceof v)||!this.open)return;let{anchor:t,floater:n}=c.getElements(this);e.target!==t&&e.target!==n&&!(n?.contains(e.target)??!1)&&l.toggle.call(this,!1)}static onKeydown(e){if(!(this instanceof v)||!this.open||!(e instanceof KeyboardEvent))return;let{anchor:t,floater:n}=c.getElements(this);if(typeof t>"u"||typeof n>"u"||(e.key==="Escape"&&l.toggle.call(this,!1),e.key!=="Tab"))return;e.preventDefault();let o=E(n);if(document.activeElement===n){d(()=>{(o[e.shiftKey?o.length-1:0]??n).focus()});return}let s=o.indexOf(document.activeElement),r=n;if(s>-1){let a=s+(e.shiftKey?-1:1);a<0?a=o.length-1:a>=o.length&&(a=0),r=o[a]??n}d(()=>{r.focus()})}static toggle(e){if(!(this instanceof v))return;let{anchor:t,floater:n}=c.getElements(this);if(typeof t>"u"||typeof n>"u")return;let o=typeof e=="boolean"?!e:this.open,{click:s,keydown:r}=c.getCallbacks(this),a=o?"removeEventListener":"addEventListener";if(s!=null&&document[a]("click",s,h.passive),r!=null&&document[a]("keydown",r,h.active),o?n.parentElement?.removeChild(n):document.body.appendChild(n),w(t,"aria-expanded",!o),this.dispatchEvent(new Event("toggle")),o){t.focus();return}let u=!1;p.update({anchor:t,floater:n,parent:this},{all:x,default:"below"},{after(){u||(u=!0,d(()=>{(E(n)[0]??n).focus()}))},getPosition:l.getPosition,validate:()=>this.open})}},f=class{static add(e,t,n){f.values.anchors?.set(e,t),f.values.floaters?.set(e,n),f.setCallbacks(e)}static getCallbacks(e){return{click:this.values.click.get(e),keydown:this.values.keydown.get(e)}}static getElements(e){return{anchor:this.values.anchors.get(e),floater:this.values.floaters.get(e)}}static isConnected(e){return f.values.connected.has(e)}static setCallbacks(e){this.values.click?.set(e,l.onClick.bind(e)),this.values.keydown?.set(e,l.onKeydown.bind(e))}},c=f;y(c,"values",{anchors:new WeakMap,click:new WeakMap,connected:new WeakMap,floaters:new WeakMap,keydown:new WeakMap});var v=class extends HTMLElement{get button(){return c.getElements(this).anchor}get content(){return c.getElements(this).floater}get open(){return this.button?.getAttribute("aria-expanded")==="true"}set open(e){l.toggle.call(this,e)}connectedCallback(){if(c.isConnected(this))return;let e=this.querySelector(":scope > [polite-popover-button]"),t=this.querySelector(":scope > [polite-popover-content]");if(e==null||!(e instanceof HTMLButtonElement||e instanceof HTMLElement&&e.getAttribute("role")==="button"))throw new Error("<polite-popover> must have a <button>-element (or button-like element) with the attribute 'polite-popover-button'");if(t==null||!(t instanceof HTMLElement))throw new Error("<polite-popover> must have an element with the attribute 'polite-popover-content'");l.initialize(this,e,t)}toggle(){l.toggle.call(this)}};customElements?.define("polite-popover",v);
