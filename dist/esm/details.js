var D=Object.defineProperty;var v=(r,e,t)=>e in r?D(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var b=(r,e,t)=>(v(r,typeof e!="symbol"?e+"":e,t),t);var y={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}},T=["[href]","[tabindex]","button","input","select","textarea"].map(r=>`${r}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",");function L(r){return requestAnimationFrame?.(r)??setTimeout?.(()=>{r(Date.now())},16)}function E(r,e){let t=r?.parentElement;for(;t!=null;){if(t===document.body)return;if(e(t))break;t=t.parentElement}return t??void 0}var l=class{static getChildren(e){return Array.from(e.querySelectorAll(":scope > delicious-details > details, :scope > details"))}static initializeList(e){let{children:t,connected:s,observer:i,open:d}=o.list;s.set(e),t.set(e,l.getChildren(e)),d.set(e,[]),i.set(e,new MutationObserver(n=>{f.callback(e,n)})),i.get(e)?.observe(e,f.options),e.addEventListener("keydown",l.onLocalKeydown.bind(e),y.passive),l.open(e,e.getAttribute("open")??void 0)}static onGlobalKeydown(e){if(e.key!=="Escape")return;let{containers:t}=o.details,s=E(document.activeElement,i=>t.has(i)&&(t.get(i)?.open??!0));s instanceof m&&l.onToggle.call(s,!1)}static onLocalKeydown(e){if(e.isComposing||e.key!=="ArrowDown"&&e.key!=="ArrowUp"||!(this instanceof g))return;let{target:t}=e;if(!(t instanceof HTMLElement))return;let s=o.list.children.get(this)??[],i=t.parentElement,d=s.indexOf(i);if(d===-1)return;let n=d+(e.key==="ArrowDown"?1:-1);n<0?n=s.length-1:n>=s.length&&(n=0),s[n]?.querySelector(":scope > summary")?.focus()}static onToggle(e){if(!(this instanceof m))return;let{buttons:t,containers:s}=o.details,i=s.get(this);i!=null&&(i.open=e??!i.open,i.open||t.get(this)?.focus())}static open(e,t){if(t==null)return;if(t.length>0&&!/^[\s\d,]+$/.test(t))throw new Error("The 'selected'-attribute of a 'delicious-details-list'-element must be a comma-separated string of numbers, e.g. '', '0' or '0,1,2'");let s=t.length>0?t.split(",").filter(i=>i.trim().length>0).map(i=>Number.parseInt(i,10)):[];l.update(e,s)}static update(e,t){if(typeof t>"u")return;let{children:s,observer:i,open:d}=o.list,n=t.filter((a,u,p)=>p.indexOf(a)===u).sort((a,u)=>a-u);if(e.multiple||(n=n.length>0&&n[0]!=null?n.length>1?[n[0]]:n:[]),n.every((a,u)=>e.open[u]===a))return;i.get(e)?.disconnect();let c=s.get(e)??[];for(let a of c)n.includes(c.indexOf(a))!==a.open&&(a.open=!a.open);d.set(e,n),L(()=>{n.length===0?e.removeAttribute("open"):e.setAttribute("open",n.join(",")),L(()=>i.get(e)?.observe(e,f.options))})}},f=class{static callback(e,t){if(t.length===0)return;let{children:s}=o.list,i=t[0],d=Array.from(i?.addedNodes??[]),n=Array.from(i?.removedNodes??[]);if(d.concat(n).some(h=>h.parentElement===e)){s.set(e,l.getChildren(e));return}if(i?.type!=="attributes"||!(i?.target instanceof HTMLDetailsElement))return;let c=i.target,u=(s.get(e)??[]).indexOf(c);if(u===-1)return;let p=[];e.multiple?p=c.open?e.open.concat([u]):e.open.filter(h=>h!==u):p=c.open?[u]:[],l.update(e,p)}};b(f,"options",{attributeFilter:["open"],attributes:!0,childList:!0,subtree:!0});var o=class{};b(o,"details",{buttons:new WeakMap,connected:new WeakMap,containers:new WeakMap}),b(o,"list",{children:new WeakMap,connected:new WeakMap,observer:new WeakMap,open:new WeakMap});var m=class extends HTMLElement{get open(){return o.details.containers.get(this)?.open??!1}set open(e){l.onToggle.call(this,e)}connectedCallback(){if(o.details.connected.has(this))return;let e=this.querySelector(":scope > details"),t=e?.querySelector(":scope > summary");o.details.connected.set(this),o.details.buttons.set(this,t),o.details.containers.set(this,e)}toggle(){l.onToggle.call(this)}},g=class extends HTMLElement{static get observedAttributes(){return["multiple","open"]}get multiple(){return this.getAttribute("multiple")!=null}set multiple(e){e?this.setAttribute("multiple",""):this.removeAttribute("multiple")}get open(){return o.list.open.get(this)??[]}set open(e){l.update(this,e)}attributeChangedCallback(e,t,s){if(t!==s)switch(e){case"multiple":l.open(this,this.getAttribute("open")??void 0);break;case"open":l.open(this,s);break;default:break}}connectedCallback(){o.list.connected.has(this)||l.initializeList(this)}};addEventListener?.("keydown",l.onGlobalKeydown,y.passive);customElements?.define("delicious-details",m);customElements?.define("delicious-details-list",g);
