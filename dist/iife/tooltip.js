(()=>{var C=Object.defineProperty;var O=(e,t,o)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var f=(e,t,o)=>(O(e,typeof t!="symbol"?t+"":t,o),o);var I=Object.defineProperty,L=(e,t,o)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,w=(e,t,o)=>(L(e,typeof t!="symbol"?t+"":t,o),o),y=Math.round(1e3/60),S=globalThis.requestAnimationFrame??function(e){return setTimeout?.(()=>{e(Date.now())},y)};function k(e){e.state.active=!0,e.state.finished=!1;let t=e instanceof b,o=0,i;function n(r){if(!e.state.active)return;i??(i=r);let s=r-i,u=s-y,h=s+y;if(u<e.configuration.time&&e.configuration.time<h)if(e.state.active&&e.callbacks.default(t?o:void 0),o+=1,t&&o<e.configuration.count)i=void 0;else{e.state.finished=!0,e.stop();return}e.state.frame=S(n)}e.state.frame=S(n)}var _=class{constructor(e,t,o,i){w(this,"callbacks"),w(this,"configuration"),w(this,"state");let n=this instanceof b,r=n?"repeated":"waited";if(typeof e!="function")throw new TypeError(`A ${r} timer must have a callback function`);if(typeof t!="number"||t<0)throw new TypeError(`A ${r} timer must have a non-negative number as its time`);if(n&&(typeof o!="number"||o<2))throw new TypeError("A repeated timer must have a number above 1 as its repeat count");if(n&&i!==void 0&&typeof i!="function")throw new TypeError("A repeated timer's after-callback must be a function");this.configuration={count:o,time:t},this.callbacks={after:i,default:e},this.state={active:!1,finished:!1,frame:null}}get active(){return this.state.active}get finished(){return!this.active&&this.state.finished}restart(){return this.stop(),k(this),this}start(){return this.state.active||k(this),this}stop(){return this.state.active=!1,this.state.frame===void 0?this:((globalThis.cancelAnimationFrame??clearTimeout)?.(this.state.frame),this.callbacks.after?.(this.finished),this.state.frame=void 0,this)}},b=class extends _{},N=class extends _{constructor(e,t){super(e,t,1,null)}};function E(e,t){return new N(e,t).start()}var a={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}};function z(e,t){let o=typeof t=="string";if(o?e.matches(t):t(e))return e;let i=e?.parentElement;for(;i!==null;){if(i===document.body)return;if(o?i.matches(t):t(i))break;i=i.parentElement}return i??void 0}function P(){return globalThis.oscapalmer_components_focusableSelector===null&&(globalThis.oscapalmer_components_focusableSelector=['[contenteditable]:not([contenteditable="false"])',"[href]","[tabindex]:not(slot)","audio[controls]","button","details","details[open] > summary","embed","iframe","input","object","select","textarea","video[controls]"].map(e=>`${e}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",")),globalThis.oscapalmer_components_focusableSelector}function F(e){return getComputedStyle?.(e)?.direction==="rtl"?"rtl":"ltr"}var R=["above","above-left","above-right","any","below","below-left","below-right","horizontal","horizontal-bottom","horizontal-top","left","left-bottom","left-top","right","right-bottom","right-top","vertical","vertical-left","vertical-right"],H=["bottom","height","left","right","top","width"],M=new Set(["left","horizontal","right"]),q=new Set(["above","any","below","vertical",...Array.from(M.values)]);function D(e,t,o,i){if(e!=="any"){let h=K(t,e,o);return{top:B(t,e,i),left:h}}let{anchor:n,floater:r}=t,s=p(n.right,n.left,r.width,innerWidth,o),u=p(n.top,n.bottom,r.height,innerHeight,i);return{left:s,top:u}}function p(e){let t=e.end+e.offset,o=e.start-e.offset;return e.preferMin?o<0?t>e.max?o:e.end:o:t>e.max?o<0?e.end:o:e.end}function W(e,t,o){if(!q.has(e))return e;let i=M.has(e);return[Y(t,o,i),j(t,o,i)].filter(n=>n!==void 0).join("-")}function K(e,t,o){let{anchor:i,floater:n}=e;switch(t){case"above":case"below":case"vertical":return i.left+i.width/2-n.width/2;case"above-left":case"below-left":case"vertical-left":return i.left;case"above-right":case"below-right":case"vertical-right":return i.right-n.width;case"horizontal":case"horizontal-bottom":case"horizontal-top":return p(i.left,i.right,n.width,innerWidth,o);case"left":case"left-bottom":case"left-top":return i.left-n.width;case"right":case"right-bottom":case"right-top":return i.right;default:return i.left}}function V(e,t){if(e===null)return t;let o=e.trim().toLowerCase(),i=R.indexOf(o);return i>-1?R[i]??t:t}function Y(e,t,o){return o?t.left===e.anchor.right?"right":t.left===e.anchor.left-e.floater.width?"left":void 0:t.top===e.anchor.bottom?"below":t.top===e.anchor.top-e.floater.height?"above":void 0}function j(e,t,o){return o?t.top===e.anchor.top?"top":t.top===e.anchor.bottom-e.floater.height?"bottom":void 0:t.left===e.anchor.left?"left":t.left===e.anchor.right-e.floater.width?"right":void 0}function B(e,t,o){let{anchor:i,floater:n}=e;switch(t){case"above":case"above-left":case"above-right":return i.top-n.height;case"horizontal":case"left":case"right":return i.top+i.height/2-n.height/2;case"below":case"below-left":case"below-right":return i.bottom;case"horizontal-bottom":case"left-bottom":case"right-bottom":return i.bottom-n.height;case"horizontal-top":case"left-top":case"right-top":return i.top;case"vertical":case"vertical-left":case"vertical-right":return p(i.top,i.bottom,n.height,innerHeight,o);default:return i.bottom}}function $(e){let{anchor:t,floater:o,parent:i}=e.elements,n=F(o)==="rtl",r,s;function u(){t.after("afterend",o)}function h(){let d=V((i??t).getAttribute(e.position.attribute)??"",e.position.defaultValue),g=t.getBoundingClientRect();if(r===d&&H.every(A=>s?.[A]===g[A]))return;r=d,s=g;let x={anchor:g,floater:o.getBoundingClientRect()},v=D(d,x,n,e.position.preferAbove),T=`matrix(1, 0, 0, 1, ${v.left}, ${v.top})`;o.style.transform!==T&&(o.style.position="fixed",o.style.inset="0 auto auto 0",o.style.transform=T,o.setAttribute("position",W(d,x,v)))}return document.body.append(o),o.hidden=!1,new b(h,0,Number.POSITIVE_INFINITY,u).start()}var c="palmer-tooltip",X=`${c}-content`,G=`${c}-position`,m=new WeakMap;function J(e){for(let t of e)t.type==="attributes"&&(t.target.getAttribute(c)===null?l.destroy(t.target):l.create(t.target))}var l=class{constructor(t){f(this,"anchor");f(this,"callbacks",{click:this.onClick.bind(this),hide:this.onHide.bind(this),keydown:this.onKeyDown.bind(this),show:this.onShow.bind(this)});f(this,"floater");f(this,"focusable");f(this,"timer");this.anchor=t,this.focusable=t.matches(P()),this.floater=l.createFloater(t),this.handleCallbacks(!0)}static create(t){m.has(t)||m.set(t,new l(t))}static destroy(t){let o=m.get(t);o!==void 0&&(o.handleCallbacks(!1),m.delete(t))}static createFloater(t){let o=t.getAttribute("aria-describedby")??t.getAttribute("aria-labelledby"),i=o===null?null:document.querySelector(`#${o}`);if(i===null)throw new TypeError(`A '${c}'-attributed element must have a valid id reference in either the 'aria-describedby' or 'aria-labelledby'-attribute.`);return i.hidden=!0,i.setAttribute(X,""),i.ariaHidden="true",i.role="tooltip",i}onClick(t){z(t.target,o=>[this.anchor,this.floater].includes(o))===void 0&&this.toggle(!1)}onHide(){this.toggle(!1)}onKeyDown(t){t instanceof KeyboardEvent&&t.key==="Escape"&&this.toggle(!1)}onShow(){this.toggle(!0)}toggle(t){let o=t?"addEventListener":"removeEventListener";document[o]("click",this.callbacks.click,a.passive),document[o]("keydown",this.callbacks.keydown,a.passive),t?(this.timer?.stop(),this.timer=$({elements:{anchor:this.anchor,floater:this.floater},position:{attribute:G,defaultValue:"vertical",preferAbove:!0}})):(this.floater.hidden=!0,this.timer?.stop())}handleCallbacks(t){let{anchor:o,floater:i,focusable:n}=this,r=t?"addEventListener":"removeEventListener";for(let s of[o,i])s[r]("mouseenter",this.callbacks.show,a.passive),s[r]("mouseleave",this.callbacks.hide,a.passive),s[r]("touchstart",this.callbacks.show,a.passive);n&&(o[r]("blur",this.callbacks.hide,a.passive),o[r]("focus",this.callbacks.show,a.passive))}},Q=new MutationObserver(J);Q.observe(document,{attributeFilter:[c],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0});E(()=>{let e=Array.from(document.querySelectorAll(`[${c}]`));for(let t of e)t.setAttribute(c,"")},0);})();
