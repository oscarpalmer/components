"use strict";(()=>{var R=Object.defineProperty;var $=(n,e,t)=>e in n?R(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var L=(n,e,t)=>($(n,typeof e!="symbol"?e+"":e,t),t);var b={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}},O=["[href]","[tabindex]","button","input","select","textarea"].map(n=>`${n}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",");function p(n){var e,t,o;return(o=(e=globalThis.requestAnimationFrame)==null?void 0:e.call(globalThis,n))!=null?o:(t=globalThis.setTimeout)==null?void 0:t.call(globalThis,()=>{n(Date.now())},16)}function A(n,e){let t=typeof e=="string";if(t?n.matches(e):e(n))return n;let o=n==null?void 0:n.parentElement;for(;o!=null;){if(o===document.body)return;if(t?o.matches(e):e(o))break;o=o.parentElement}return o!=null?o:void 0}function C(n,e,t){let o=n.getAttribute(e);return o==null||o.trim().length===0?t:o}function M(n){var o;let e=[],t=Array.from(n.querySelectorAll(O));for(let i of t){let s=(o=globalThis.getComputedStyle)==null?void 0:o.call(globalThis,i);(s==null||s.display!=="none"&&s.visibility!=="hidden")&&e.push(i)}return e}function w(n){return n==null?!0:n.trim().length===0}function f(n,e,t){t==null?n.removeAttribute(e):n.setAttribute(e,String(t))}function P(n,e,t){typeof t=="boolean"&&(n==null||n.setAttribute(e,String(t)))}var v=class{static update(e,t,o){let{anchor:i,floater:s,parent:l}=e,{after:a,getPosition:u,validate:y}=o;function k(){if(!y())return;let T=v.getType(l!=null?l:i,t),x=u(T,{anchor:i.getBoundingClientRect(),floater:s.getBoundingClientRect(),parent:l==null?void 0:l.getBoundingClientRect()});v.setPosition(s,x),a==null||a(),p(k)}p(k)}static getType(e,t){let o=C(e,"position",t.default);return t.all.includes(o)?o:t.default}static setPosition(e,t){let{left:o,top:i}=t.coordinate;e.getAttribute("position")!==t.type&&e.setAttribute("position",t.type);let s=`matrix(1, 0, 0, 1, ${o}, ${i})`;e.style.transform!==s&&(e.style.inset="0 auto auto 0",e.style.position="fixed",e.style.transform=s,e.hidden&&p(()=>{e.hidden=!1}))}};var g="formal-focus-trap",H=new WeakMap,h=class{static observer(e){for(let t of e){if(t.type!=="attributes")continue;let o=t.target;o.getAttribute(g)==null?m.destroy(o):m.create(o)}}static onKeydown(e){if(e.key!=="Tab")return;let t=e.target,o=A(t,`[${g}]`);o!=null&&(e.preventDefault(),e.stopImmediatePropagation(),h.handle(e,o,t))}static handle(e,t,o){var a;let i=M(t);if(o===t){p(()=>{var u;((u=i[e.shiftKey?i.length-1:0])!=null?u:t).focus()});return}let s=i.indexOf(o),l=t;if(s>-1){let u=s+(e.shiftKey?-1:1);u<0?u=i.length-1:u>=i.length&&(u=0),l=(a=i[u])!=null?a:t}p(()=>{l.focus()})}},m=class{constructor(e){L(this,"tabIndex");this.tabIndex=e.tabIndex,f(e,"tabindex","-1")}static create(e){H.has(e)||H.set(e,new m(e))}static destroy(e){let t=H.get(e);t!=null&&(f(e,"tabindex",t.tabIndex),H.delete(e))}};(()=>{if(typeof globalThis._formalFocusTrap!="undefined")return;globalThis._formalFocusTrap=null,new MutationObserver(h.observer).observe(document,{attributeFilter:[g],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0}),p(()=>{let e=Array.from(document.querySelectorAll(`[${g}]`));for(let t of e)t.setAttribute(g,"")}),document.addEventListener("keydown",h.onKeydown,b.active)})();var S=0,W=["any"].concat(...["above","below"].map(n=>[n,`${n}-left`,`${n}-right`])),r=class{static getPosition(e,t){let o=r.getValue(e,["left","right"],t,!0),i=r.getValue(e,["below","above"],t,!1),s=t.anchor.left===o?"left":"right";if(e!=="any")return{coordinate:{left:o,top:i},type:["above","below"].includes(e)?`${e}-${s}`:e};let l=t.anchor.bottom===i?"below":"above";return{coordinate:{left:o,top:i},type:`${l}-${s}`}}static getValue(e,t,o,i){var T;let{anchor:s,floater:l}=o,a=i?l.width:l.height,u=i?s.left:s.bottom,y=(i?s.right:s.top)-a;return t.some(x=>e.includes(x))?e.includes((T=t[0])!=null?T:"_")?u:y:u+a<=(i?globalThis.innerWidth:globalThis.innerHeight)||y<0?u:y}static initialize(e,t,o){o.hidden=!0,w(o.id)&&f(o,"id",w(e.id)?`polite_popover_${S++}`:`${e.id}_content`),f(t,"aria-controls",o.id),P(t,"aria-expanded",!1),f(o,"role","dialog"),f(o,g,""),P(o,"aria-modal",!0),t.addEventListener("click",r.toggle.bind(e),b.passive)}static onClick(e){var i;if(!(this instanceof E)||!this.open)return;let t=c.values.anchors.get(this),o=c.values.floaters.get(this);e.target!==t&&e.target!==o&&!((i=o==null?void 0:o.contains(e.target))!=null&&i)&&r.toggle.call(this,!1)}static onKeydown(e){this instanceof E&&this.open&&e instanceof KeyboardEvent&&e.key==="Escape"&&r.toggle.call(this,!1)}static toggle(e){if(!(this instanceof E))return;let t=c.values.anchors.get(this),o=c.values.floaters.get(this);t!=null&&o!=null&&r.handleToggle(this,t,o,e)}static handleCallbacks(e,t){let o=c.values.click.get(e),i=c.values.keydown.get(e),s=t?"addEventListener":"removeEventListener";o!=null&&document[s]("click",o,b.passive),i!=null&&document[s]("keydown",i,b.active)}static handleToggle(e,t,o,i){let s=typeof i=="boolean"?!i:e.open;if(r.handleCallbacks(e,!s),o.hidden=s,P(t,"aria-expanded",!s),e.dispatchEvent(new Event("toggle")),s){t.focus();return}let l=!1;v.update({anchor:t,floater:o,parent:e},{all:W,default:"below"},{after(){l||(l=!0,p(()=>{var a;((a=M(o)[0])!=null?a:o).focus()}))},getPosition:r.getPosition,validate:()=>e.open})}},d=class{static add(e){var i,s,l,a;let t=e.querySelector(":scope > [polite-popover-button]"),o=e.querySelector(":scope > [polite-popover-content]");t==null||o==null||((i=d.values.anchors)==null||i.set(e,t),(s=d.values.floaters)==null||s.set(e,o),(l=d.values.click)==null||l.set(e,r.onClick.bind(e)),(a=d.values.keydown)==null||a.set(e,r.onKeydown.bind(e)))}static remove(e){let t=d.values.floaters.get(e);t!=null&&(t.hidden=!0,e.appendChild(t)),d.values.anchors.delete(e),d.values.floaters.delete(e),d.values.click.delete(e),d.values.keydown.delete(e)}},c=d;L(c,"values",{anchors:new WeakMap,click:new WeakMap,floaters:new WeakMap,keydown:new WeakMap});var E=class extends HTMLElement{get button(){return c.values.anchors.get(this)}get content(){return c.values.floaters.get(this)}get open(){var e;return((e=this.button)==null?void 0:e.getAttribute("aria-expanded"))==="true"}set open(e){r.toggle.call(this,e)}constructor(){super();let e=this.querySelector(":scope > [polite-popover-button]"),t=this.querySelector(":scope > [polite-popover-content]");if(e==null||!(e instanceof HTMLButtonElement||e instanceof HTMLElement&&e.getAttribute("role")==="button"))throw new Error("<polite-popover> must have a <button>-element (or button-like element) with the attribute 'polite-popover-button'");if(t==null||!(t instanceof HTMLElement))throw new Error("<polite-popover> must have an element with the attribute 'polite-popover-content'");r.initialize(this,e,t)}connectedCallback(){c.add(this)}disconnectedCallback(){c.remove(this)}toggle(){r.toggle.call(this)}};globalThis.customElements.define("polite-popover",E);})();
