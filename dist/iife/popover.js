(()=>{var C=Object.defineProperty;var B=(t,e,o)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var f=(t,e,o)=>(B(t,typeof e!="symbol"?e+"":e,o),o);var D=Object.defineProperty,V=(t,e,o)=>e in t?D(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,_=(t,e,o)=>(V(t,typeof e!="symbol"?e+"":e,o),o),A=Math.round(1e3/60),O=globalThis.requestAnimationFrame??function(t){return setTimeout?.(()=>{t(Date.now())},A)};function z(t){t.state.active=!0,t.state.finished=!1;let e=t instanceof g,o=0,n;function i(r){if(!t.state.active)return;n??(n=r);let s=r-n,l=s-A,b=s+A;if(l<t.configuration.time&&t.configuration.time<b)if(t.state.active&&t.callbacks.default(e?o:void 0),o+=1,e&&o<t.configuration.count)n=void 0;else{t.state.finished=!0,t.stop();return}t.state.frame=O(i)}t.state.frame=O(i)}var L=class{constructor(t,e,o,n){_(this,"callbacks"),_(this,"configuration"),_(this,"state");let i=this instanceof g,r=i?"repeated":"waited";if(typeof t!="function")throw new TypeError(`A ${r} timer must have a callback function`);if(typeof e!="number"||e<0)throw new TypeError(`A ${r} timer must have a non-negative number as its time`);if(i&&(typeof o!="number"||o<2))throw new TypeError("A repeated timer must have a number above 1 as its repeat count");if(i&&n!==void 0&&typeof n!="function")throw new TypeError("A repeated timer's after-callback must be a function");this.configuration={count:o,time:e},this.callbacks={after:n,default:t},this.state={active:!1,finished:!1,frame:null}}get active(){return this.state.active}get finished(){return!this.active&&this.state.finished}restart(){return this.stop(),z(this),this}start(){return this.state.active||z(this),this}stop(){return this.state.active=!1,this.state.frame===void 0?this:((globalThis.cancelAnimationFrame??clearTimeout)?.(this.state.frame),this.callbacks.after?.(this.finished),this.state.frame=void 0,this)}},g=class extends L{},Y=class extends L{constructor(t,e){super(t,e,1,null)}};function u(t,e){return new Y(t,e).start()}var h={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}};function m(t,e){let o=typeof e=="string";if(o?t.matches(e):e(t))return t;let n=t?.parentElement;for(;n!==null;){if(n===document.body)return;if(o?n.matches(e):e(n))break;n=n.parentElement}return n??void 0}function v(t){let e=[],o=Array.from(t.querySelectorAll(j()));for(let n of o){let i=getComputedStyle?.(n);(i===null||i.display!=="none"&&i.visibility!=="hidden")&&e.push(n)}return e}function j(){return globalThis.oscapalmer_components_focusableSelector===null&&(globalThis.oscapalmer_components_focusableSelector=['[contenteditable]:not([contenteditable="false"])',"[href]","[tabindex]:not(slot)","audio[controls]","button","details","details[open] > summary","embed","iframe","input","object","select","textarea","video[controls]"].map(t=>`${t}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",")),globalThis.oscapalmer_components_focusableSelector}function R(t){return getComputedStyle?.(t)?.direction==="rtl"?"rtl":"ltr"}function w(t){return(t??"").trim().length===0}var F=["above","above-left","above-right","any","below","below-left","below-right","horizontal","horizontal-bottom","horizontal-top","left","left-bottom","left-top","right","right-bottom","right-top","vertical","vertical-left","vertical-right"],X=["bottom","height","left","right","top","width"],H=new Set(["left","horizontal","right"]),G=new Set(["above","any","below","vertical",...Array.from(H.values)]);function J(t,e,o,n){if(t!=="any"){let b=U(e,t,o);return{top:ot(e,t,n),left:b}}let{anchor:i,floater:r}=e,s=y(i.right,i.left,r.width,innerWidth,o),l=y(i.top,i.bottom,r.height,innerHeight,n);return{left:s,top:l}}function y(t){let e=t.end+t.offset,o=t.start-t.offset;return t.preferMin?o<0?e>t.max?o:t.end:o:e>t.max?o<0?t.end:o:t.end}function Q(t,e,o){if(!G.has(t))return t;let n=H.has(t);return[tt(e,o,n),et(e,o,n)].filter(i=>i!==void 0).join("-")}function U(t,e,o){let{anchor:n,floater:i}=t;switch(e){case"above":case"below":case"vertical":return n.left+n.width/2-i.width/2;case"above-left":case"below-left":case"vertical-left":return n.left;case"above-right":case"below-right":case"vertical-right":return n.right-i.width;case"horizontal":case"horizontal-bottom":case"horizontal-top":return y(n.left,n.right,i.width,innerWidth,o);case"left":case"left-bottom":case"left-top":return n.left-i.width;case"right":case"right-bottom":case"right-top":return n.right;default:return n.left}}function Z(t,e){if(t===null)return e;let o=t.trim().toLowerCase(),n=F.indexOf(o);return n>-1?F[n]??e:e}function tt(t,e,o){return o?e.left===t.anchor.right?"right":e.left===t.anchor.left-t.floater.width?"left":void 0:e.top===t.anchor.bottom?"below":e.top===t.anchor.top-t.floater.height?"above":void 0}function et(t,e,o){return o?e.top===t.anchor.top?"top":e.top===t.anchor.bottom-t.floater.height?"bottom":void 0:e.left===t.anchor.left?"left":e.left===t.anchor.right-t.floater.width?"right":void 0}function ot(t,e,o){let{anchor:n,floater:i}=t;switch(e){case"above":case"above-left":case"above-right":return n.top-i.height;case"horizontal":case"left":case"right":return n.top+n.height/2-i.height/2;case"below":case"below-left":case"below-right":return n.bottom;case"horizontal-bottom":case"left-bottom":case"right-bottom":return n.bottom-i.height;case"horizontal-top":case"left-top":case"right-top":return n.top;case"vertical":case"vertical-left":case"vertical-right":return y(n.top,n.bottom,i.height,innerHeight,o);default:return n.bottom}}function N(t){let{anchor:e,floater:o,parent:n}=t.elements,i=R(o)==="rtl",r,s;function l(){e.after("afterend",o)}function b(){let p=Z((n??e).getAttribute(t.position.attribute)??"",t.position.defaultValue),T=e.getBoundingClientRect();if(r===p&&X.every(I=>s?.[I]===T[I]))return;r=p,s=T;let $={anchor:T,floater:o.getBoundingClientRect()},E=J(p,$,i,t.position.preferAbove),k=`matrix(1, 0, 0, 1, ${E.left}, ${E.top})`;o.style.transform!==k&&(o.style.position="fixed",o.style.inset="0 auto auto 0",o.style.transform=k,o.setAttribute("position",Q(p,$,E)))}return document.body.append(o),o.hidden=!1,new g(b,0,Number.POSITIVE_INFINITY,l).start()}var c="palmer-focus-trap",x=new WeakMap;function nt(t,e,o){let n=v(e);if(o===e){u(()=>{(n[t.shiftKey?n.length-1:0]??e).focus()},0);return}let i=n.indexOf(o),r=e;if(i>-1){let s=i+(t.shiftKey?-1:1);s<0?s=n.length-1:s>=n.length&&(s=0),r=n[s]??e}u(()=>{r.focus()},0)}function it(t){for(let e of t)e.type==="attributes"&&(e.target.getAttribute(c)===void 0?d.destroy(e.target):d.create(e.target))}function rt(t){if(t.key!=="Tab")return;let e=m(t.target,`[${c}]`);e!==void 0&&(t.preventDefault(),t.stopImmediatePropagation(),nt(t,e,t.target))}var d=class{constructor(e){f(this,"tabIndex");this.tabIndex=e.tabIndex,e.tabIndex=-1}static create(e){x.has(e)||x.set(e,new d(e))}static destroy(e){let o=x.get(e);o!==void 0&&(e.tabIndex=o.tabIndex,x.delete(e))}};(()=>{if(globalThis.oscarpalmer_components_focusTrap!==null)return;globalThis.oscarpalmer_components_focusTrap=1,new MutationObserver(it).observe(document,{attributeFilter:[c],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0}),u(()=>{let e=Array.from(document.querySelectorAll(`[${c}]`));for(let o of e)o.setAttribute(c,"")},0),document.addEventListener("keydown",rt,h.active)})();var a="palmer-popover",W=new WeakMap,st=0;function K(t,e){at(t,e),e&&t.content?(v(t.content)?.[0]??t.content).focus():t.button?.focus()}function at(t,e){let o=W.get(t);if(o===void 0)return;let n=e?"addEventListener":"removeEventListener";document[n]("click",o.click,h.passive),document[n]("keydown",o.keydown,h.passive)}function q(t,e,o){let{button:n,content:i}=e;if(n===void 0||i===void 0)return;let r=m(o,`[${a}-content]`);if(r===void 0){S(e,!1);return}t.stopPropagation();let s=Array.from(document.body.children);s.indexOf(r)-s.indexOf(i)<(t instanceof KeyboardEvent?1:0)&&S(e,!1)}function S(t,e){let o=typeof e=="boolean"?!e:t.open;t.button.setAttribute("aria-expanded",!o),o?(t.content.hidden=!0,t.timer?.stop(),K(t,!1)):(t.timer?.stop(),t.timer=N({elements:{anchor:t.button,floater:t.content,parent:t},position:{attribute:"position",defaultValue:"vertical",preferAbove:!1}}),u(()=>{K(t,!0)},50)),t.dispatchEvent(new Event("toggle"))}function ct(t,e,o){o.hidden=!0,w(t.id)&&(t.id=`palmer_popover_${++st}`),w(e.id)&&(e.id=`${t.id}_button`),w(o.id)&&(o.id=`${t.id}_content`),e.setAttribute("aria-controls",o.id),e.ariaExpanded="false",e.ariaHasPopup="dialog",e instanceof HTMLButtonElement||(e.tabIndex=0),o.setAttribute(c,""),o.role="dialog",o.ariaModal="false",W.set(t,{click:ft.bind(t),keydown:ut.bind(t)}),e.addEventListener("click",P.bind(t),h.passive)}function lt(t){return t===null?!1:t instanceof HTMLButtonElement?!0:t instanceof HTMLElement&&t.getAttribute("role")==="button"}function ft(t){this.open&&q(t,this,t.target)}function ut(t){this.open&&t instanceof KeyboardEvent&&t.key==="Escape"&&q(t,this,document.activeElement)}function P(t){S(this,t)}var M=class extends HTMLElement{constructor(){super();f(this,"button");f(this,"content");f(this,"timer");let o=this.querySelector(`:scope > [${a}-button]`),n=this.querySelector(`:scope > [${a}-content]`);if(!lt(o))throw new Error(`<${a}> must have a <button>-element (or button-like element) with the attribute '${a}-button`);if(n===null||!(n instanceof HTMLElement))throw new Error(`<${a}> must have an element with the attribute '${a}-content'`);this.button=o,this.content=n,ct(this,o,n)}get open(){return this.button?.getAttribute("aria-expanded")==="true"}set open(o){P.call(this,o)}toggle(){this.button&&this.content&&P.call(this)}};customElements.define(a,M);})();
