"use strict";(()=>{var T=Object.defineProperty;var M=(l,e,n)=>e in l?T(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n;var P=(l,e,n)=>(M(l,typeof e!="symbol"?e+"":e,n),n);var b={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}},L=["[href]","[tabindex]","button","input","select","textarea"].map(l=>`${l}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",");function p(l){var e;return(e=requestAnimationFrame==null?void 0:requestAnimationFrame(l))!=null?e:setTimeout==null?void 0:setTimeout(()=>{l(Date.now())},16)}function k(l,e,n){let t=l.getAttribute(e);return t==null||t.trim().length===0?n:t}function y(l){var t;let e=[],n=Array.from(l.querySelectorAll(L));for(let o of n){let i=(t=window==null?void 0:window.getComputedStyle)==null?void 0:t.call(window,o);(i==null||i.display!=="none"&&i.visibility!=="hidden")&&e.push(o)}return e}function w(){return URL.createObjectURL(new Blob).replace(/^.*\/([\w-]+)$/,"$1").replace(/-/g,"_")}var f=class{static update(e,n,t){let{anchor:o,floater:i,parent:a}=e,{after:c,getPosition:s,validate:d}=t;function v(){if(d())return;let h=f.getType(a!=null?a:o,n),E=s(h,{anchor:o.getBoundingClientRect(),floater:i.getBoundingClientRect(),parent:a==null?void 0:a.getBoundingClientRect()});f.setPosition(i,E),p(v),c==null||c()}p(v)}static getType(e,n){let t=k(e,"position",n.default);return n.all.includes(t)?t:n.default}static setPosition(e,n){let{left:t,top:o}=n.coordinate;e.setAttribute("position",n.type),e.style.inset="0 auto auto 0",e.style.position="fixed",e.style.transform=`translate3d(${t}px, ${o}px, 0)`,e.hidden&&p(()=>{e.hidden=!1})}};var x=["any"].concat(...["above","below"].map(l=>[l,`${l}-left`,`${l}-right`])),r=class{static getPosition(e,n){let t=r.getValue(e,["left","right"],n,!0),o=r.getValue(e,["below","above"],n,!1);return e!=="any"?{coordinate:{left:t,top:o},type:["above","below"].includes(e)?`??? ${e}-${n.anchor.left===t?"left":"right"}`:e}:{coordinate:{left:t,top:o},type:"???"}}static getValue(e,n,t,o){var h;let{anchor:i,floater:a}=t,c=o?a.width:a.height,s=o?i.left:i.bottom,d=(o?i.right:i.top)-c;return n.some(E=>e.includes(E))?e.includes((h=n[0])!=null?h:"_")?s:d:s+c<=(o?window.innerWidth:window.innerHeight)||d<0?s:d}static initialize(e,n,t){var o;(o=t.parentElement)==null||o.removeChild(t),t.hidden=!0,t.id||t.setAttribute("id",w()),n.setAttribute("aria-controls",t.id),n.setAttribute("aria-expanded","false"),t.setAttribute("tabindex","-1"),n.addEventListener("click",r.toggle.bind(e),b.passive),u.add(e,n,t)}static onClick(e){var o;if(!(this instanceof m))return;let{anchor:n,floater:t}=u.getElements(this);n==null||t==null||n.getAttribute("aria-expanded")!=="true"||e.target!==n&&e.target!==t&&!((o=t==null?void 0:t.contains(e.target))!=null&&o)&&r.toggle.call(this,!1)}static onKeydown(e){var c;if(!(this instanceof m)||!(e instanceof KeyboardEvent))return;let{anchor:n,floater:t}=u.getElements(this);if(n==null||t==null||n.getAttribute("aria-expanded")!=="true"||(e.key==="Escape"&&r.toggle.call(this,!1),e.key!=="Tab"))return;e.preventDefault();let o=y(t);if(document.activeElement===t){p(()=>{var s;((s=o[e.shiftKey?o.length-1:0])!=null?s:t).focus()});return}let i=o.indexOf(document.activeElement),a=t;if(i>-1){let s=i+(e.shiftKey?-1:1);s<0?s=o.length-1:s>=o.length&&(s=0),a=(c=o[s])!=null?c:t}p(()=>{a.focus()})}static toggle(e){var d;if(!(this instanceof m))return;let{anchor:n,floater:t}=u.getElements(this);if(n==null||t==null)return;let o=typeof e=="boolean"?!e:n.getAttribute("aria-expanded")==="true",{click:i,keydown:a}=u.getCallbacks(this),c=o?"removeEventListener":"addEventListener";if(i!=null&&document[c]("click",i,b.passive),a!=null&&document[c]("keydown",a,b.active),o?(d=t.parentElement)==null||d.removeChild(t):document.body.appendChild(t),n.setAttribute("aria-expanded",String(!o)),o){n.focus();return}let s=!1;f.update({anchor:n,floater:t,parent:this},{all:x,default:"below"},{after(){s||(s=!0,p(()=>{var v;((v=y(t)[0])!=null?v:t).focus()}))},getPosition:r.getPosition,validate:()=>n.getAttribute("aria-expanded")!=="true"})}},g=class{static add(e,n,t){var o,i;(o=g.values.anchors)==null||o.set(e,n),(i=g.values.floaters)==null||i.set(e,t),g.setCallbacks(e)}static getCallbacks(e){return{click:this.values.click.get(e),keydown:this.values.keydown.get(e)}}static getElements(e){return{anchor:this.values.anchors.get(e),floater:this.values.floaters.get(e)}}static isConnected(e){return g.values.connected.has(e)}static setCallbacks(e){var n,t;(n=this.values.click)==null||n.set(e,r.onClick.bind(e)),(t=this.values.keydown)==null||t.set(e,r.onKeydown.bind(e))}},u=g;P(u,"values",{anchors:new WeakMap,click:new WeakMap,connected:new WeakMap,floaters:new WeakMap,keydown:new WeakMap});var m=class extends HTMLElement{get content(){return u.getElements(this).floater}close(){r.toggle.call(this,!1)}connectedCallback(){if(u.isConnected(this))return;let e=this.querySelector(":scope > [polite-popover-button]"),n=this.querySelector(":scope > [polite-popover-content]");if(e==null||!(e instanceof HTMLButtonElement||e instanceof HTMLElement&&e.getAttribute("role")==="button"))throw new Error("<polite-popover> must have a <button>-element (or button-like element) with the attribute 'polite-poover-button'");if(n==null||!(n instanceof HTMLElement))throw new Error("<polite-popover> must have an element with the attribute 'polite-popover-content'");r.initialize(this,e,n)}open(){r.toggle.call(this,!0)}toggle(){r.toggle.call(this)}};customElements==null||customElements.define("polite-popover",m);})();
