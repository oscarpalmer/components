(()=>{var x=Math.round(16.666666666666668),S=globalThis.requestAnimationFrame??function(t){return setTimeout?.(()=>{t(Date.now())},x)};function z(t){t.state.active=!0,t.state.finished=!1;let e=t instanceof h,n=0,i;function o(r){if(!t.state.active)return;i??(i=r);let s=r-i,u=s-x,v=s+x;if(u<t.configuration.time&&t.configuration.time<v)if(t.state.active&&t.callbacks.default(e?n:void 0),n+=1,e&&n<t.configuration.count)i=void 0;else{t.state.finished=!0,t.stop();return}t.state.frame=S(o)}t.state.frame=S(o)}var L=class{get active(){return this.state.active}get finished(){return!this.active&&this.state.finished}constructor(t,e,n,i){let o=this instanceof h,r=o?"repeated":"waited";if(typeof t!="function")throw new TypeError(`A ${r} timer must have a callback function`);if(typeof e!="number"||e<0)throw new TypeError(`A ${r} timer must have a non-negative number as its time`);if(o&&(typeof n!="number"||n<2))throw new TypeError("A repeated timer must have a number above 1 as its repeat count");if(o&&i!==void 0&&typeof i!="function")throw new TypeError("A repeated timer's after-callback must be a function");this.configuration={count:n,time:e},this.callbacks={after:i,default:t},this.state={active:!1,finished:!1,frame:null}}restart(){return this.stop(),z(this),this}start(){return this.state.active||z(this),this}stop(){return this.state.active=!1,this.state.frame===void 0?this:((globalThis.cancelAnimationFrame??clearTimeout)?.(this.state.frame),this.callbacks.after?.(this.finished),this.state.frame=void 0,this)}},h=class extends L{},q=class extends L{constructor(t,e){super(t,e,1,null)}};function l(t,e){return new q(t,e).start()}var c={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}};function b(t,e){let n=typeof e=="string";if(n?t.matches(e):e(t))return t;let i=t?.parentElement;for(;i!==null;){if(i===document.body)return;if(n?i.matches(e):e(i))break;i=i.parentElement}return i??void 0}function O(t){return getComputedStyle?.(t)?.direction==="rtl"?"rtl":"ltr"}function p(t){return(t??"").trim().length===0}var P=["above","above-left","above-right","below","below-left","below-right","horizontal","horizontal-bottom","horizontal-top","left","left-bottom","left-top","right","right-bottom","right-top","vertical","vertical-left","vertical-right"],W=["bottom","height","left","right","top","width"],R=new Set(["left","horizontal","right"]),B=new Set(["above","below","vertical",...Array.from(R.values)]);function _(t,e,n,i){let o=V(t,e,n);return{top:G(t,e,i),left:o}}function F(t){let e=t.end+t.offset,n=t.start-t.offset;return t.preferMin?n<0?e>t.max?n:t.end:n:e>t.max?n<0?t.end:n:t.end}function D(t,e,n){if(!B.has(t))return t;let i=R.has(t);return[Y(e,n,i),X(e,n,i)].filter(o=>o!==void 0).join("-")}function V(t,e,n){let{anchor:i,floater:o}=e;switch(t){case"above":case"below":case"vertical":return i.left+i.width/2-o.width/2;case"above-left":case"below-left":case"vertical-left":return i.left;case"above-right":case"below-right":case"vertical-right":return i.right-o.width;case"horizontal":case"horizontal-bottom":case"horizontal-top":return F({end:i.right,max:globalThis.innerWidth,offset:o.width,preferMin:n,start:i.left});case"left":case"left-bottom":case"left-top":return i.left-o.width;case"right":case"right-bottom":case"right-top":return i.right;default:return i.left}}function j(t,e){if(t===null)return e;let n=t.trim().toLowerCase(),i=P.indexOf(n);return i>-1?P[i]??e:e}function Y(t,e,n){return n?e.left===t.anchor.right?"right":e.left===t.anchor.left-t.floater.width?"left":void 0:e.top===t.anchor.bottom?"below":e.top===t.anchor.top-t.floater.height?"above":void 0}function X(t,e,n){return n?e.top===t.anchor.top?"top":e.top===t.anchor.bottom-t.floater.height?"bottom":void 0:e.left===t.anchor.left?"left":e.left===t.anchor.right-t.floater.width?"right":void 0}function G(t,e,n){let{anchor:i,floater:o}=e;switch(t){case"above":case"above-left":case"above-right":return i.top-o.height;case"horizontal":case"left":case"right":return i.top+i.height/2-o.height/2;case"below":case"below-left":case"below-right":return i.bottom;case"horizontal-bottom":case"left-bottom":case"right-bottom":return i.bottom-o.height;case"horizontal-top":case"left-top":case"right-top":return i.top;case"vertical":case"vertical-left":case"vertical-right":return F({end:i.bottom,max:globalThis.innerHeight,offset:o.height,preferMin:n,start:i.top});default:return i.bottom}}function C(t){let{anchor:e,floater:n,parent:i}=t.elements,o=O(n)==="rtl",r,s;function u(){e.after(n)}function v(){let d=j((i??e).getAttribute(t.position.attribute)??"",t.position.defaultValue),w=e.getBoundingClientRect();if(r===d&&W.every(I=>s?.[I]===w[I]))return;r=d,s=w;let $={anchor:w,floater:n.getBoundingClientRect()},y=_(d,$,o,t.position.preferAbove),M=`matrix(1, 0, 0, 1, ${y.left}, ${y.top})`;n.style.transform!==M&&(n.style.position="fixed",n.style.inset="0 auto auto 0",n.style.transform=M,n.setAttribute("position",D(d,$,y)))}return document.body.append(n),n.hidden=!1,new h(v,0,Number.POSITIVE_INFINITY,u).start()}var J=['[contenteditable]:not([contenteditable="false"])',"[href]",'[tabindex="0"]:not(slot)',"audio[controls]","button","details","details[open] > summary","embed","iframe","input","object","select","textarea","video[controls]"].map(t=>`${t}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",");function g(t){let e=[],n=Array.from(t.querySelectorAll(J));for(let i of n){let o=getComputedStyle?.(i);(o===null||o.display!=="none"&&o.visibility!=="hidden")&&e.push(i)}return e}var f="palmer-focus-trap",m=new WeakMap;function Q(t){m.has(t)||m.set(t,new E(t))}function U(t){let e=m.get(t);e!==void 0&&(t.tabIndex=e.tabIndex,m.delete(t))}function Z(t,e,n){let i=g(e);if(n===e){l(()=>{(i[t.shiftKey?i.length-1:0]??e).focus()},0);return}let o=i.indexOf(n),r=e;if(o>-1){let s=o+(t.shiftKey?-1:1);s<0?s=i.length-1:s>=i.length&&(s=0),r=i[s]??e}l(()=>{r.focus()},0)}function tt(t){for(let e of t)e.type==="attributes"&&(e.target.getAttribute(f)===void 0?U(e.target):Q(e.target))}function et(t){if(t.key!=="Tab")return;let e=b(t.target,`[${f}]`);e!==void 0&&(t.preventDefault(),t.stopImmediatePropagation(),Z(t,e,t.target))}var E=class{constructor(e){this.tabIndex=e.tabIndex,e.tabIndex=-1}};(()=>{if(globalThis.oscarpalmerComponentsFocusTrap!==null)return;globalThis.oscarpalmerComponentsFocusTrap=1,new MutationObserver(tt).observe(document,{attributeFilter:[f],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0}),l(()=>{let e=Array.from(document.querySelectorAll(`[${f}]`));for(let n of e)n.setAttribute(f,"")},0),document.addEventListener("keydown",et,c.active)})();var a="palmer-popover",K=new WeakMap,nt=0;function H(t,e){it(t,e),e&&t.content?(g(t.content)?.[0]??t.content).focus():t.button?.focus()}function it(t,e){let n=K.get(t);if(n===void 0)return;let i=e?"addEventListener":"removeEventListener";document[i]("click",n.click,c.passive),document[i]("keydown",n.keydown,c.passive)}function N(t,e,n){let{button:i,content:o}=e;if(i===void 0||o===void 0)return;let r=b(n,`[${a}-content]`);if(r===void 0){T(e,!1);return}t.stopPropagation();let s=Array.from(document.body.children);s.indexOf(r)-s.indexOf(o)<(t instanceof KeyboardEvent?1:0)&&T(e,!1)}function T(t,e){let n=typeof e=="boolean"?!e:t.open;t.button.setAttribute("aria-expanded",!n),n?(t.content.hidden=!0,t.timer?.stop(),H(t,!1)):(t.timer?.stop(),t.timer=C({elements:{anchor:t.button,floater:t.content,parent:t},position:{attribute:"position",defaultValue:"vertical",preferAbove:!1}}),l(()=>{H(t,!0)},50)),t.dispatchEvent(new Event("toggle"))}function ot(t,e,n){n.hidden=!0,p(t.id)&&(t.id=`palmer_popover_${++nt}`),p(e.id)&&(e.id=`${t.id}_button`),p(n.id)&&(n.id=`${t.id}_content`),e.setAttribute("aria-controls",n.id),e.ariaExpanded="false",e.ariaHasPopup="dialog",e instanceof HTMLButtonElement||(e.tabIndex=0),n.setAttribute(f,""),n.role="dialog",n.ariaModal="false",K.set(t,{click:st.bind(t),keydown:at.bind(t)}),e.addEventListener("click",A.bind(t),c.passive)}function rt(t){return t===null?!1:t instanceof HTMLButtonElement?!0:t instanceof HTMLElement&&t.getAttribute("role")==="button"}function st(t){this.open&&N(t,this,t.target)}function at(t){this.open&&t instanceof KeyboardEvent&&t.key==="Escape"&&N(t,this,document.activeElement)}function A(t){T(this,t)}var k=class extends HTMLElement{get open(){return this.button?.getAttribute("aria-expanded")==="true"}set open(e){A.call(this,e)}constructor(){super();let e=this.querySelector(`:scope > [${a}-button]`),n=this.querySelector(`:scope > [${a}-content]`);if(!rt(e))throw new Error(`<${a}> must have a <button>-element (or button-like element) with the attribute '${a}-button`);if(n===null||!(n instanceof HTMLElement))throw new Error(`<${a}> must have an element with the attribute '${a}-content'`);this.button=e,this.content=n,this.timer=void 0,ot(this,e,n)}toggle(){this.button&&this.content&&A.call(this)}};customElements.define(a,k);})();
