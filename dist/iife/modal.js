(()=>{function x(t,e){let r=typeof e=="string";if(r?t.matches(e):e(t))return t;let n=t?.parentElement;for(;n!==null;){if(n===document.body)return;if(r?n.matches(e):e(n))break;n=n.parentElement}return n??void 0}function h(t){return(t??"").trim().length===0}function u(t,e){return{capture:e??!1,passive:t??!0}}var F=[D,C,E,R,P],O=['[contenteditable]:not([contenteditable="false"])',"[tabindex]:not(slot)","a[href]","audio[controls]","button","details","details > summary:first-of-type","iframe","input","select","textarea","video[controls]"].map(t=>`${t}:not([inert])`).join(",");function c(t){let e=Array.from(t.querySelectorAll(O)).map(n=>({element:n,tabIndex:q(n)})).filter(n=>K(n)),r=[];for(let n of e)r[n.tabIndex]===void 0?r[n.tabIndex]=[n.element]:r[n.tabIndex].push(n.element);return r.flat()}function q(t){return t.tabIndex>-1?t.tabIndex:/^(audio|details|video)$/i.test(t.tagName)||B(t)?H(t)?-1:0:-1}function H(t){return!Number.isNaN(Number.parseInt(t.getAttribute("tabindex"),10))}function D(t){return/^(button|input|select|textarea)$/i.test(t.element.tagName)&&W(t.element)?!0:(t.element.disabled??!1)||t.element.getAttribute("aria-disabled")==="true"}function W(t){let e=t.parentElement;for(;e!==null;){if(/^fieldset$/i.test(e.tagName)&&e.disabled){let r=Array.from(e.children);for(let n of r)if(/^legend$/i.test(n.tagName))return e.matches("fieldset[disabled] *")?!0:!n.contains(t);return!0}e=e.parentElement}return!1}function B(t){return/^(|true)$/i.test(t.getAttribute("contenteditable"))}function K(t){return!F.some(e=>e(t))}function R(t){if(t.element.hidden||t.element instanceof HTMLInputElement&&t.element.type==="hidden")return!0;let e=getComputedStyle(t.element);if(e.display==="none"||e.visibility==="hidden")return!0;let{height:r,width:n}=t.element.getBoundingClientRect();return r===0&&n===0}function E(t){return(t.element.inert??!1)||/^(|true)$/i.test(t.element.getAttribute("inert"))||t.element.parentElement!==null&&E({element:t.element.parentElement})}function C(t){return t.tabIndex<0}function P(t){return/^details$/i.test(t.element.tagName)&&Array.from(t.element.children).some(e=>/^summary$/i.test(e.tagName))}var b=Math.round(16.666666666666668),v=requestAnimationFrame??function(t){return setTimeout?.(()=>{t(Date.now())},b)};function A(t){t.state.active=!0,t.state.finished=!1;let e=t instanceof I,r=0,n;function s(o){if(!t.state.active)return;n??(n=o);let a=o-n,L=a-b,S=a+b;if(L<t.configuration.time&&t.configuration.time<S)if(t.state.active&&t.callbacks.default(e?r:void 0),r+=1,e&&r<t.configuration.count)n=void 0;else{t.state.finished=!0,t.stop();return}t.state.frame=v(s)}t.state.frame=v(s)}var $=class{get active(){return this.state.active}get finished(){return!this.active&&this.state.finished}constructor(t,e,r,n){let s=this instanceof I,o=s?"repeated":"waited";if(typeof t!="function")throw new TypeError(`A ${o} timer must have a callback function`);if(typeof e!="number"||e<0)throw new TypeError(`A ${o} timer must have a non-negative number as its time`);if(s&&(typeof r!="number"||r<2))throw new TypeError("A repeated timer must have a number above 1 as its repeat count");if(s&&n!==void 0&&typeof n!="function")throw new TypeError("A repeated timer's after-callback must be a function");this.configuration={count:r,time:e},this.callbacks={after:n,default:t},this.state={active:!1,finished:!1,frame:null}}restart(){return this.stop(),A(this),this}start(){return this.state.active||A(this),this}stop(){return this.state.active=!1,this.state.frame===void 0?this:((cancelAnimationFrame??clearTimeout)?.(this.state.frame),this.callbacks.after?.(this.finished),this.state.frame=void 0,this)}},I=class extends ${},V=class extends ${constructor(t,e){super(t,e,1,null)}};function f(t,e){return new V(t,e).start()}var l="palmer-focus-trap",d=new WeakMap;function X(t){d.has(t)||d.set(t,new p(t))}function Y(t){let e=d.get(t);e!==void 0&&(t.tabIndex=e.tabIndex,d.delete(t))}function j(t,e,r){let n=c(e);if(r===e){f(()=>{(n[t.shiftKey?n.length-1:0]??e).focus()},0);return}let s=n.indexOf(r),o=e;if(s>-1){let a=s+(t.shiftKey?-1:1);a<0?a=n.length-1:a>=n.length&&(a=0),o=n[a]??e}f(()=>{o.focus()},0)}function z(t){for(let e of t)e.type==="attributes"&&(e.target.getAttribute(l)===void 0?Y(e.target):X(e.target))}function G(t){if(t.key!=="Tab")return;let e=x(t.target,`[${l}]`);e!==void 0&&(t.preventDefault(),t.stopImmediatePropagation(),j(t,e,t.target))}var p=class{constructor(e){this.tabIndex=e.tabIndex,e.tabIndex=-1}},J=new MutationObserver(z);J.observe(document,{attributeFilter:[l],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0});f(()=>{let t=Array.from(document.querySelectorAll(`[${l}]`));for(let e of t)e.setAttribute(l,"")},0);document.addEventListener("keydown",G,u(!1));var i="palmer-modal",w=`${i}-open`,m=new WeakMap,T=new WeakMap;function N(t){t.hidden=!0,T.get(t)?.append(t),m.get(t)?.focus(),m.delete(t),t.dispatchEvent(new Event("close"))}function M(t){t.addEventListener("click",U,u())}function y(){N(this)}function Q(t){t.key==="Escape"&&y.call(this)}function U(){let t=document.querySelector(`#${this.getAttribute(w)}`);t!==void 0&&(m.set(t,this),k(t))}function k(t){t.hidden=!1,document.body.append(t),(c(t)[0]??t).focus(),t.dispatchEvent(new Event("open"))}var g=class extends HTMLElement{get open(){return this.parentElement===document.body&&!this.hidden}set open(e){typeof e!="boolean"||this.open===e||(e?k(this):N(this))}constructor(){super(),this.hidden=!0;let{id:e}=this;if(e===void 0||e.trim().length===0)throw new TypeError(`<${i}> must have an ID`);if(h(this.getAttribute("aria-label"))&&h(this.getAttribute("aria-labelledby")))throw new TypeError(`<${i}> should be labelled by either the 'aria-label' or 'aria-labelledby'-attribute`);let r=this.querySelector(`[${i}-close]`);if(!(r instanceof HTMLButtonElement))throw new TypeError(`<${i}> must have a <button>-element with the attribute '${i}-close'`);if(!(this.querySelector(`:scope > [${i}-content]`)instanceof HTMLElement))throw new TypeError(`<${i}> must have an element with the attribuet '${i}-content'`);let n=this.querySelector(`:scope > [${i}-overlay]`);if(!(n instanceof HTMLElement))throw new TypeError(`<${i}> must have an element with the attribuet '${i}-overlay'`);T.set(this,this.parentElement),this.setAttribute("role","dialog"),this.setAttribute("aria-modal",!0),this.setAttribute(l,""),this.addEventListener("keydown",Q.bind(this),u()),r.addEventListener("click",y.bind(this),u()),n.addEventListener("click",y.bind(this),u())}hide(){this.open=!1}show(){this.open=!0}};customElements.define(i,g);var Z=new MutationObserver(t=>{for(let e of t)e.type==="attributes"&&e.target instanceof HTMLButtonElement&&M(e.target)});Z.observe(document,{attributeFilter:[w],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0});setTimeout(()=>{let t=Array.from(document.querySelectorAll(`[${w}]`));for(let e of t)M(e)},0);})();
