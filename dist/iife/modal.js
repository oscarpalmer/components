(()=>{function x(e,t){let r=typeof t=="string";if(r?e.matches(t):t(e))return e;let n=e?.parentElement;for(;n!==null;){if(n===document.body)return;if(r?n.matches(t):t(n))break;n=n.parentElement}return n??void 0}function h(e){return(e??"").trim().length===0}function u(e,t){return{capture:t??!1,passive:e??!0}}var F=[H,C,E,R,P],O=['[contenteditable]:not([contenteditable="false"])',"[tabindex]:not(slot)","a[href]","audio[controls]","button","details","details > summary:first-of-type","iframe","input","select","textarea","video[controls]"].map(e=>`${e}:not([inert])`).join(",");function c(e){let t=Array.from(e.querySelectorAll(O)).map(n=>({element:n,tabIndex:q(n)})).filter(n=>K(n)),r=[];for(let n of t)r[n.tabIndex]===void 0?r[n.tabIndex]=[n.element]:r[n.tabIndex].push(n.element);return r.flat()}function q(e){return e.tabIndex>-1?e.tabIndex:/^(audio|details|video)$/i.test(e.tagName)||B(e)?D(e)?-1:0:-1}function D(e){return!Number.isNaN(Number.parseInt(e.getAttribute("tabindex"),10))}function H(e){return/^(button|input|select|textarea)$/i.test(e.element.tagName)&&W(e.element)?!0:(e.element.disabled??!1)||e.element.ariaDisabled==="true"}function W(e){let t=e.parentElement;for(;t!==null;){if(/^fieldset$/i.test(t.tagName)&&t.disabled){let r=Array.from(t.children);for(let n of r)if(/^legend$/i.test(n.tagName))return t.matches("fieldset[disabled] *")?!0:!n.contains(e);return!0}t=t.parentElement}return!1}function B(e){return/^(|true)$/i.test(e.getAttribute("contenteditable"))}function K(e){return!F.some(t=>t(e))}function R(e){if(e.element.hidden||e.element instanceof HTMLInputElement&&e.element.type==="hidden")return!0;let t=getComputedStyle(e.element);if(t.display==="none"||t.visibility==="hidden")return!0;let{height:r,width:n}=e.element.getBoundingClientRect();return r===0&&n===0}function E(e){return(e.element.inert??!1)||/^(|true)$/i.test(e.element.getAttribute("inert"))||e.element.parentElement!==null&&E({element:e.element.parentElement})}function C(e){return e.tabIndex<0}function P(e){return/^details$/i.test(e.element.tagName)&&Array.from(e.element.children).some(t=>/^summary$/i.test(t.tagName))}var b=Math.round(16.666666666666668),v=requestAnimationFrame??function(e){return setTimeout?.(()=>{e(Date.now())},b)};function $(e){e.state.active=!0,e.state.finished=!1;let t=e instanceof I,r=0,n;function s(o){if(!e.state.active)return;n??(n=o);let a=o-n,L=a-b,S=a+b;if(L<e.configuration.time&&e.configuration.time<S)if(e.state.active&&e.callbacks.default(t?r:void 0),r+=1,t&&r<e.configuration.count)n=void 0;else{e.state.finished=!0,e.stop();return}e.state.frame=v(s)}e.state.frame=v(s)}var A=class{get active(){return this.state.active}get finished(){return!this.active&&this.state.finished}constructor(e,t,r,n){let s=this instanceof I,o=s?"repeated":"waited";if(typeof e!="function")throw new TypeError(`A ${o} timer must have a callback function`);if(typeof t!="number"||t<0)throw new TypeError(`A ${o} timer must have a non-negative number as its time`);if(s&&(typeof r!="number"||r<2))throw new TypeError("A repeated timer must have a number above 1 as its repeat count");if(s&&n!==void 0&&typeof n!="function")throw new TypeError("A repeated timer's after-callback must be a function");this.configuration={count:r,time:t},this.callbacks={after:n,default:e},this.state={active:!1,finished:!1,frame:null}}restart(){return this.stop(),$(this),this}start(){return this.state.active||$(this),this}stop(){return this.state.active=!1,this.state.frame===void 0?this:((cancelAnimationFrame??clearTimeout)?.(this.state.frame),this.callbacks.after?.(this.finished),this.state.frame=void 0,this)}},I=class extends A{},V=class extends A{constructor(e,t){super(e,t,1,null)}};function f(e,t){return new V(e,t).start()}var l="palmer-focus-trap",d=new WeakMap;function X(e){d.has(e)||d.set(e,new p(e))}function Y(e){let t=d.get(e);t!==void 0&&(e.tabIndex=t.tabIndex,d.delete(e))}function j(e,t,r){let n=c(t);if(r===t){f(()=>{(n[e.shiftKey?n.length-1:0]??t).focus()},0);return}let s=n.indexOf(r),o=t;if(s>-1){let a=s+(e.shiftKey?-1:1);a<0?a=n.length-1:a>=n.length&&(a=0),o=n[a]??t}f(()=>{o.focus()},0)}function z(e){for(let t of e)t.type==="attributes"&&(t.target.getAttribute(l)===void 0?Y(t.target):X(t.target))}function G(e){if(e.key!=="Tab")return;let t=x(e.target,`[${l}]`);t!==void 0&&(e.preventDefault(),e.stopImmediatePropagation(),j(e,t,e.target))}var p=class{constructor(t){this.tabIndex=t.tabIndex,t.tabIndex=-1}},J=new MutationObserver(z);J.observe(document,{attributeFilter:[l],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0});f(()=>{let e=Array.from(document.querySelectorAll(`[${l}]`));for(let t of e)t.setAttribute(l,"")},0);document.addEventListener("keydown",G,u(!1));var i="palmer-modal",w=`${i}-open`,m=new WeakMap,T=new WeakMap;function N(e){e.hidden=!0,T.get(e)?.append(e),m.get(e)?.focus(),m.delete(e),e.dispatchEvent(new Event("close"))}function M(e){e.addEventListener("click",U,u())}function y(){N(this)}function Q(e){e.key==="Escape"&&y.call(this)}function U(){let e=document.querySelector(`#${this.getAttribute(w)}`);e!==void 0&&(m.set(e,this),k(e))}function k(e){e.hidden=!1,document.body.append(e),(c(e)[0]??e).focus(),e.dispatchEvent(new Event("open"))}var g=class extends HTMLElement{get open(){return this.parentElement===document.body&&!this.hidden}set open(t){typeof t!="boolean"||this.open===t||(t?k(this):N(this))}constructor(){super(),this.hidden=!0;let{id:t}=this;if(t===void 0||t.trim().length===0)throw new TypeError(`<${i}> must have an ID`);if(h(this.getAttribute("aria-label"))&&h(this.getAttribute("aria-labelledby")))throw new TypeError(`<${i}> should be labelled by either the 'aria-label' or 'aria-labelledby'-attribute`);let r=this.querySelector(`[${i}-close]`);if(!(r instanceof HTMLButtonElement))throw new TypeError(`<${i}> must have a <button>-element with the attribute '${i}-close'`);if(!(this.querySelector(`:scope > [${i}-content]`)instanceof HTMLElement))throw new TypeError(`<${i}> must have an element with the attribuet '${i}-content'`);let n=this.querySelector(`:scope > [${i}-overlay]`);if(!(n instanceof HTMLElement))throw new TypeError(`<${i}> must have an element with the attribuet '${i}-overlay'`);T.set(this,this.parentElement),this.role="dialog",this.setAttribute("aria-modal",!0),this.setAttribute(l,""),this.addEventListener("keydown",Q.bind(this),u()),r.addEventListener("click",y.bind(this),u()),n.addEventListener("click",y.bind(this),u())}hide(){this.open=!1}show(){this.open=!0}};customElements.define(i,g);var Z=new MutationObserver(e=>{for(let t of e)t.type==="attributes"&&t.target instanceof HTMLButtonElement&&M(t.target)});Z.observe(document,{attributeFilter:[w],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0});setTimeout(()=>{let e=Array.from(document.querySelectorAll(`[${w}]`));for(let t of e)M(t)},0);})();
