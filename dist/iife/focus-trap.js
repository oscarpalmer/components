"use strict";(()=>{var E=Object.defineProperty;var T=(t,e,n)=>e in t?E(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var a=(t,e,n)=>(T(t,typeof e!="symbol"?e+"":e,n),n);var m=Math.round(16.666666666666668),p=requestAnimationFrame??function(t){return setTimeout?.(()=>{t(Date.now())},m)??-1},l=class{constructor(t,e,n,r){a(this,"callbacks");a(this,"configuration");a(this,"state",{active:!1,finished:!1});let o=this instanceof h,s=o?"repeated":"waited";if(typeof t!="function")throw new Error(`A ${s} timer must have a callback function`);if(typeof e!="number"||e<0)throw new Error(`A ${s} timer must have a non-negative number as its time`);if(o&&(typeof n!="number"||n<2))throw new Error("A repeated timer must have a number above 1 as its repeat count");if(o&&r!=null&&typeof r!="function")throw new Error("A repeated timer's after-callback must be a function");this.configuration={count:n,time:e},this.callbacks={after:r,default:t}}get active(){return this.state.active}get finished(){return!this.state.active&&this.state.finished}static run(t){t.state.active=!0,t.state.finished=!1;let e=t instanceof h,n=0,r;function o(s){if(!t.state.active)return;r??(r=s);let i=s-r,g=i-m,x=i+m;if(g<t.configuration.time&&t.configuration.time<x)if(t.state.active&&t.callbacks.default(e?n:void 0),n+=1,e&&n<t.configuration.count)r=void 0;else{t.state.finished=!0,t.stop();return}t.state.frame=p(o)}t.state.frame=p(o)}restart(){return this.stop(),l.run(this),this}start(){return this.state.active||l.run(this),this}stop(){return this.state.active=!1,typeof this.state.frame>"u"?this:((cancelAnimationFrame??clearTimeout)?.(this.state.frame),this.callbacks.after?.(this.finished),this.state.frame=void 0,this)}},h=class extends l{},M=class extends l{constructor(t,e){super(t,e,1)}};function f(t,e){return new M(t,e).start()}var b={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}},P=(()=>{try{if("matchMedia"in window){let t=matchMedia("(pointer: coarse)");if(t!=null&&typeof t.matches=="boolean")return t.matches}return"ontouchstart"in window||navigator.maxTouchPoints>0||(navigator?.msMaxTouchPoints??0)>0}catch{return!1}})();function v(t,e){let n=typeof e=="string";if(n?t.matches(e):e(t))return t;let r=t?.parentElement;for(;r!=null;){if(r===document.body)return;if(n?r.matches(e):e(r))break;r=r.parentElement}return r??void 0}function y(t){let e=[],n=Array.from(t.querySelectorAll(w()));for(let r of n){let o=getComputedStyle?.(r);(o==null||o.display!=="none"&&o.visibility!=="hidden")&&e.push(r)}return e}function w(){let t=globalThis;return t.focusableSelector==null&&(t.focusableSelector=['[contenteditable]:not([contenteditable="false"])',"[href]","[tabindex]:not(slot)","audio[controls]","button","details","details[open] > summary","embed","iframe","input","object","select","textarea","video[controls]"].map(e=>`${e}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",")),t.focusableSelector}var c="palmer-focus-trap",d=new WeakMap;function L(t,e,n){let r=y(e);if(n===e){f(()=>{(r[t.shiftKey?r.length-1:0]??e).focus()},0);return}let o=r.indexOf(n),s=e;if(o>-1){let i=o+(t.shiftKey?-1:1);i<0?i=r.length-1:i>=r.length&&(i=0),s=r[i]??e}f(()=>{s.focus()},0)}function H(t){for(let e of t){if(e.type!=="attributes")continue;let n=e.target;n.getAttribute(c)==null?u.destroy(n):u.create(n)}}function A(t){if(t.key!=="Tab")return;let e=t.target,n=v(e,`[${c}]`);n!=null&&(t.preventDefault(),t.stopImmediatePropagation(),L(t,n,e))}var u=class{constructor(e){a(this,"tabIndex");this.tabIndex=e.tabIndex,e.tabIndex=-1}static create(e){d.has(e)||d.set(e,new u(e))}static destroy(e){let n=d.get(e);n!=null&&(e.tabIndex=n.tabIndex,d.delete(e))}};(()=>{let t=globalThis;if(t.palmerFocusTrap!=null)return;t.palmerFocusTrap=1,new MutationObserver(H).observe(document,{attributeFilter:[c],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0}),f(()=>{let n=Array.from(document.querySelectorAll(`[${c}]`));for(let r of n)r.setAttribute(c,"")},0),document.addEventListener("keydown",A,b.active)})();})();
