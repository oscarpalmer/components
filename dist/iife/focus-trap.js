(()=>{var f=Math.round(16.666666666666668),d=globalThis.requestAnimationFrame??function(t){return setTimeout?.(()=>{t(Date.now())},f)};function p(t){t.state.active=!0,t.state.finished=!1;let e=t instanceof b,r=0,n;function s(i){if(!t.state.active)return;n??(n=i);let o=i-n,v=o-f,x=o+f;if(v<t.configuration.time&&t.configuration.time<x)if(t.state.active&&t.callbacks.default(e?r:void 0),r+=1,e&&r<t.configuration.count)n=void 0;else{t.state.finished=!0,t.stop();return}t.state.frame=d(s)}t.state.frame=d(s)}var h=class{get active(){return this.state.active}get finished(){return!this.active&&this.state.finished}constructor(t,e,r,n){let s=this instanceof b,i=s?"repeated":"waited";if(typeof t!="function")throw new TypeError(`A ${i} timer must have a callback function`);if(typeof e!="number"||e<0)throw new TypeError(`A ${i} timer must have a non-negative number as its time`);if(s&&(typeof r!="number"||r<2))throw new TypeError("A repeated timer must have a number above 1 as its repeat count");if(s&&n!==void 0&&typeof n!="function")throw new TypeError("A repeated timer's after-callback must be a function");this.configuration={count:r,time:e},this.callbacks={after:n,default:t},this.state={active:!1,finished:!1,frame:null}}restart(){return this.stop(),p(this),this}start(){return this.state.active||p(this),this}stop(){return this.state.active=!1,this.state.frame===void 0?this:((globalThis.cancelAnimationFrame??clearTimeout)?.(this.state.frame),this.callbacks.after?.(this.finished),this.state.frame=void 0,this)}},b=class extends h{},w=class extends h{constructor(t,e){super(t,e,1,null)}};function u(t,e){return new w(t,e).start()}var m={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}};function g(t,e){let r=typeof e=="string";if(r?t.matches(e):e(t))return t;let n=t?.parentElement;for(;n!==null;){if(n===document.body)return;if(r?n.matches(e):e(n))break;n=n.parentElement}return n??void 0}var A=['[contenteditable]:not([contenteditable="false"])',"[href]",'[tabindex="0"]:not(slot)',"audio[controls]","button","details","details[open] > summary","embed","iframe","input","object","select","textarea","video[controls]"].map(t=>`${t}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",");function y(t){let e=[],r=Array.from(t.querySelectorAll(A));for(let n of r){let s=getComputedStyle?.(n);(s===null||s.display!=="none"&&s.visibility!=="hidden")&&e.push(n)}return e}var a="palmer-focus-trap",c=new WeakMap;function T(t){c.has(t)||c.set(t,new l(t))}function E(t){let e=c.get(t);e!==void 0&&(t.tabIndex=e.tabIndex,c.delete(t))}function I(t,e,r){let n=y(e);if(r===e){u(()=>{(n[t.shiftKey?n.length-1:0]??e).focus()},0);return}let s=n.indexOf(r),i=e;if(s>-1){let o=s+(t.shiftKey?-1:1);o<0?o=n.length-1:o>=n.length&&(o=0),i=n[o]??e}u(()=>{i.focus()},0)}function S(t){for(let e of t)e.type==="attributes"&&(e.target.getAttribute(a)===void 0?E(e.target):T(e.target))}function k(t){if(t.key!=="Tab")return;let e=g(t.target,`[${a}]`);e!==void 0&&(t.preventDefault(),t.stopImmediatePropagation(),I(t,e,t.target))}var l=class{constructor(e){this.tabIndex=e.tabIndex,e.tabIndex=-1}};(()=>{if(globalThis.oscarpalmerComponentsFocusTrap!==null)return;globalThis.oscarpalmerComponentsFocusTrap=1,new MutationObserver(S).observe(document,{attributeFilter:[a],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0}),u(()=>{let e=Array.from(document.querySelectorAll(`[${a}]`));for(let r of e)r.setAttribute(a,"")},0),document.addEventListener("keydown",k,m.active)})();})();
