"use strict";(()=>{var T=Object.defineProperty;var x=(e,t,n)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var a=(e,t,n)=>(x(e,typeof t!="symbol"?t+"":t,n),n);var m=Math.round(16.666666666666668),w=cancelAnimationFrame!=null?cancelAnimationFrame:function(e){clearTimeout==null||clearTimeout(e)},g=requestAnimationFrame!=null?requestAnimationFrame:function(e){var t;return(t=setTimeout==null?void 0:setTimeout(()=>{e(Date.now())},m))!=null?t:-1},f=class{constructor(e,t,n){a(this,"callback");a(this,"count");a(this,"frame");a(this,"running",!1);a(this,"time");let r=this instanceof p,o=r?"repeated":"waited";if(typeof e!="function")throw new Error(`A ${o} timer must have a callback function`);if(typeof t!="number"||t<0)throw new Error(`A ${o} timer must have a non-negative number as its time`);if(r&&(typeof n!="number"||n<2))throw new Error("A repeated timer must have a number above 1 as its repeat count");this.callback=e,this.count=n,this.time=t}get active(){return this.running}static run(e){e.running=!0;let t=0,n;function r(o){if(!e.running)return;n!=null||(n=o);let s=o-n,c=s-m,i=s+m;if(c<e.time&&e.time<i)if(e.running&&e.callback(e instanceof p?t:void 0),t+=1,e instanceof p&&t<e.count)n=void 0;else{e.stop();return}e.frame=g(r)}e.frame=g(r)}restart(){return this.stop(),f.run(this),this}start(){return this.running?this:(f.run(this),this)}stop(){return this.running=!1,typeof this.frame=="undefined"?this:(w(this.frame),this.frame=void 0,this)}},p=class extends f{},M=class extends f{constructor(e,t){super(e,t,1)}};function d(e,t){return new M(e,t).start()}var v={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}},L=['[contenteditable]:not([contenteditable="false"])',"[href]","[tabindex]:not(slot)","audio[controls]","button","details","details[open] > summary","embed","iframe","input","object","select","textarea","video[controls]"],A=L.map(e=>`${e}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",");function y(e,t){let n=typeof t=="string";if(n?e.matches(t):t(e))return e;let r=e==null?void 0:e.parentElement;for(;r!=null;){if(r===document.body)return;if(n?r.matches(t):t(r))break;r=r.parentElement}return r!=null?r:void 0}function E(e){var r;let t=[],n=Array.from(e.querySelectorAll(A));for(let o of n){let s=(r=globalThis.getComputedStyle)==null?void 0:r.call(globalThis,o);(s==null||s.display!=="none"&&s.visibility!=="hidden")&&t.push(o)}return t}function h(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,String(n))}var l="formal-focus-trap",b=new WeakMap;function H(e,t,n){var c;let r=E(t);if(n===t){d(()=>{var i;((i=r[e.shiftKey?r.length-1:0])!=null?i:t).focus()},0);return}let o=r.indexOf(n),s=t;if(o>-1){let i=o+(e.shiftKey?-1:1);i<0?i=r.length-1:i>=r.length&&(i=0),s=(c=r[i])!=null?c:t}d(()=>{s.focus()},0)}function k(e){for(let t of e){if(t.type!=="attributes")continue;let n=t.target;n.getAttribute(l)==null?u.destroy(n):u.create(n)}}function S(e){if(e.key!=="Tab")return;let t=e.target,n=y(t,`[${l}]`);n!=null&&(e.preventDefault(),e.stopImmediatePropagation(),H(e,n,t))}var u=class{constructor(t){a(this,"tabIndex");this.tabIndex=t.tabIndex,h(t,"tabindex","-1")}static create(t){b.has(t)||b.set(t,new u(t))}static destroy(t){let n=b.get(t);n!=null&&(h(t,"tabindex",n.tabIndex),b.delete(t))}};(()=>{if(typeof globalThis._formalFocusTrap!="undefined")return;globalThis._formalFocusTrap=null,new MutationObserver(k).observe(document,{attributeFilter:[l],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0}),d(()=>{let t=Array.from(document.querySelectorAll(`[${l}]`));for(let n of t)n.setAttribute(l,"")},0),document.addEventListener("keydown",S,v.active)})();})();
