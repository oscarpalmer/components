"use strict";(()=>{var E=Object.defineProperty;var T=(e,t,n)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var a=(e,t,n)=>(T(e,typeof t!="symbol"?t+"":t,n),n);var p=Math.round(16.666666666666668),h=requestAnimationFrame!=null?requestAnimationFrame:function(e){var t;return(t=setTimeout==null?void 0:setTimeout(()=>{e(Date.now())},p))!=null?t:-1},f=class{constructor(e,t,n,r){a(this,"callbacks");a(this,"configuration");a(this,"state",{active:!1,finished:!1});let o=this instanceof b,i=o?"repeated":"waited";if(typeof e!="function")throw new Error(`A ${i} timer must have a callback function`);if(typeof t!="number"||t<0)throw new Error(`A ${i} timer must have a non-negative number as its time`);if(o&&(typeof n!="number"||n<2))throw new Error("A repeated timer must have a number above 1 as its repeat count");if(o&&r!=null&&typeof r!="function")throw new Error("A repeated timer's after-callback must be a function");this.configuration={count:n,time:t},this.callbacks={after:r,default:e}}get active(){return this.state.active}get finished(){return!this.state.active&&this.state.finished}static run(e){e.state.active=!0,e.state.finished=!1;let t=e instanceof b,n=0,r;function o(i){if(!e.state.active)return;r!=null||(r=i);let u=i-r,s=u-p,x=u+p;if(s<e.configuration.time&&e.configuration.time<x)if(e.state.active&&e.callbacks.default(t?n:void 0),n+=1,t&&n<e.configuration.count)r=void 0;else{e.state.finished=!0,e.stop();return}e.state.frame=h(o)}e.state.frame=h(o)}restart(){return this.stop(),f.run(this),this}start(){return this.state.active||f.run(this),this}stop(){var e,t,n;return this.state.active=!1,typeof this.state.frame=="undefined"?this:((e=cancelAnimationFrame!=null?cancelAnimationFrame:clearTimeout)==null||e(this.state.frame),(n=(t=this.callbacks).after)==null||n.call(t,this.finished),this.state.frame=void 0,this)}},b=class extends f{},M=class extends f{constructor(e,t){super(e,t,1)}};function d(e,t){return new M(e,t).start()}var y={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}},P=(()=>{var e;try{if("matchMedia"in window){let t=matchMedia("(pointer: coarse)");if(t!=null&&typeof t.matches=="boolean")return t.matches}return"ontouchstart"in window||navigator.maxTouchPoints>0||((e=navigator==null?void 0:navigator.msMaxTouchPoints)!=null?e:0)>0}catch(t){return!1}})();function g(e,t){let n=typeof t=="string";if(n?e.matches(t):t(e))return e;let r=e==null?void 0:e.parentElement;for(;r!=null;){if(r===document.body)return;if(n?r.matches(t):t(r))break;r=r.parentElement}return r!=null?r:void 0}function v(e){let t=[],n=Array.from(e.querySelectorAll(w()));for(let r of n){let o=getComputedStyle==null?void 0:getComputedStyle(r);(o==null||o.display!=="none"&&o.visibility!=="hidden")&&t.push(r)}return t}function w(){let e=globalThis;return e.focusableSelector==null&&(e.focusableSelector=['[contenteditable]:not([contenteditable="false"])',"[href]","[tabindex]:not(slot)","audio[controls]","button","details","details[open] > summary","embed","iframe","input","object","select","textarea","video[controls]"].map(t=>`${t}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",")),e.focusableSelector}var l="palmer-focus-trap",m=new WeakMap;function L(e,t,n){var u;let r=v(t);if(n===t){d(()=>{var s;((s=r[e.shiftKey?r.length-1:0])!=null?s:t).focus()},0);return}let o=r.indexOf(n),i=t;if(o>-1){let s=o+(e.shiftKey?-1:1);s<0?s=r.length-1:s>=r.length&&(s=0),i=(u=r[s])!=null?u:t}d(()=>{i.focus()},0)}function H(e){for(let t of e){if(t.type!=="attributes")continue;let n=t.target;n.getAttribute(l)==null?c.destroy(n):c.create(n)}}function A(e){if(e.key!=="Tab")return;let t=e.target,n=g(t,`[${l}]`);n!=null&&(e.preventDefault(),e.stopImmediatePropagation(),L(e,n,t))}var c=class{constructor(t){a(this,"tabIndex");this.tabIndex=t.tabIndex,t.tabIndex=-1}static create(t){m.has(t)||m.set(t,new c(t))}static destroy(t){let n=m.get(t);n!=null&&(t.tabIndex=n.tabIndex,m.delete(t))}};(()=>{let e=globalThis;if(e.palmerFocusTrap!=null)return;e.palmerFocusTrap=1,new MutationObserver(H).observe(document,{attributeFilter:[l],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0}),d(()=>{let n=Array.from(document.querySelectorAll(`[${l}]`));for(let r of n)r.setAttribute(l,"")},0),document.addEventListener("keydown",A,y.active)})();})();
