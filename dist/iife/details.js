"use strict";(()=>{var g=Object.defineProperty;var E=(e,t,n)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var o=(e,t,n)=>(E(e,typeof t!="symbol"?t+"":t,n),n);var u=Math.round(16.666666666666668),p=requestAnimationFrame??function(e){return setTimeout?.(()=>{e(Date.now())},u)??-1},c=class{constructor(e,t,n,s){o(this,"callbacks");o(this,"configuration");o(this,"state",{active:!1,finished:!1});let r=this instanceof b,l=r?"repeated":"waited";if(typeof e!="function")throw new Error(`A ${l} timer must have a callback function`);if(typeof t!="number"||t<0)throw new Error(`A ${l} timer must have a non-negative number as its time`);if(r&&(typeof n!="number"||n<2))throw new Error("A repeated timer must have a number above 1 as its repeat count");if(r&&s!=null&&typeof s!="function")throw new Error("A repeated timer's after-callback must be a function");this.configuration={count:n,time:t},this.callbacks={after:s,default:e}}get active(){return this.state.active}get finished(){return!this.state.active&&this.state.finished}static run(e){e.state.active=!0,e.state.finished=!1;let t=e instanceof b,n=0,s;function r(l){if(!e.state.active)return;s??(s=l);let h=l-s,v=h-u,y=h+u;if(v<e.configuration.time&&e.configuration.time<y)if(e.state.active&&e.callbacks.default(t?n:void 0),n+=1,t&&n<e.configuration.count)s=void 0;else{e.state.finished=!0,e.stop();return}e.state.frame=p(r)}e.state.frame=p(r)}restart(){return this.stop(),c.run(this),this}start(){return this.state.active||c.run(this),this}stop(){return this.state.active=!1,typeof this.state.frame>"u"?this:((cancelAnimationFrame??clearTimeout)?.(this.state.frame),this.callbacks.after?.(this.finished),this.state.frame=void 0,this)}},b=class extends c{},w=class extends c{constructor(e,t){super(e,t,1)}};function f(e,t){return new w(e,t).start()}var d={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}},D=(()=>{try{if("matchMedia"in window){let e=matchMedia("(pointer: coarse)");if(e!=null&&typeof e.matches=="boolean")return e.matches}return"ontouchstart"in window||navigator.maxTouchPoints>0||(navigator?.msMaxTouchPoints??0)>0}catch{return!1}})();var i="palmer-details",m=new WeakMap;function T(e){for(let t of e){if(t.type!=="attributes")continue;let n=t.target;if(!(n instanceof HTMLDetailsElement))throw new Error(`An element with the '${i}'-attribute must be a <details>-element`);n.getAttribute(i)==null?a.destroy(n):a.create(n)}}var a=class{constructor(t){o(this,"callbacks");o(this,"details");o(this,"summary");this.details=t,this.summary=t.querySelector(":scope > summary")??void 0,this.callbacks={onKeydown:this.onKeydown.bind(this),onToggle:this.onToggle.bind(this)},this.details.addEventListener("toggle",this.callbacks.onToggle,d.passive)}onKeydown(t){t.key!=="Escape"||!this.details.open||[...this.details.querySelectorAll(`[${i}][open]`)].some(s=>s.contains(document.activeElement))||!this.details.contains(document.activeElement)||(this.details.open=!1,f(()=>this.summary?.focus(),0))}onToggle(){document[this.details.open?"addEventListener":"removeEventListener"]?.("keydown",this.callbacks.onKeydown,d.passive)}static create(t){m.has(t)||m.set(t,new a(t))}static destroy(t){m.delete(t)}},M=new MutationObserver(T);M.observe(document,{attributeFilter:[i],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0});f(()=>{let e=Array.from(document.querySelectorAll(`[${i}]`));for(let t of e)t.setAttribute(i,"")},0);})();
