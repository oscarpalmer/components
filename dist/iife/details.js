"use strict";(()=>{var g=Object.defineProperty;var E=(t,e,n)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var o=(t,e,n)=>(E(t,typeof e!="symbol"?e+"":e,n),n);var u=Math.round(16.666666666666668),p=requestAnimationFrame!=null?requestAnimationFrame:function(t){var e;return(e=setTimeout==null?void 0:setTimeout(()=>{t(Date.now())},u))!=null?e:-1},l=class{constructor(t,e,n,s){o(this,"callbacks");o(this,"configuration");o(this,"state",{active:!1,finished:!1});let i=this instanceof b,c=i?"repeated":"waited";if(typeof t!="function")throw new Error(`A ${c} timer must have a callback function`);if(typeof e!="number"||e<0)throw new Error(`A ${c} timer must have a non-negative number as its time`);if(i&&(typeof n!="number"||n<2))throw new Error("A repeated timer must have a number above 1 as its repeat count");if(i&&s!=null&&typeof s!="function")throw new Error("A repeated timer's after-callback must be a function");this.configuration={count:n,time:e},this.callbacks={after:s,default:t}}get active(){return this.state.active}get finished(){return!this.state.active&&this.state.finished}static run(t){t.state.active=!0,t.state.finished=!1;let e=t instanceof b,n=0,s;function i(c){if(!t.state.active)return;s!=null||(s=c);let h=c-s,y=h-u,v=h+u;if(y<t.configuration.time&&t.configuration.time<v)if(t.state.active&&t.callbacks.default(e?n:void 0),n+=1,e&&n<t.configuration.count)s=void 0;else{t.state.finished=!0,t.stop();return}t.state.frame=p(i)}t.state.frame=p(i)}restart(){return this.stop(),l.run(this),this}start(){return this.state.active||l.run(this),this}stop(){var t,e,n;return this.state.active=!1,typeof this.state.frame=="undefined"?this:((t=cancelAnimationFrame!=null?cancelAnimationFrame:clearTimeout)==null||t(this.state.frame),(n=(e=this.callbacks).after)==null||n.call(e,this.finished),this.state.frame=void 0,this)}},b=class extends l{},w=class extends l{constructor(t,e){super(t,e,1)}};function f(t,e){return new w(t,e).start()}var d={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}},D=(()=>{var t;try{if("matchMedia"in window){let e=matchMedia("(pointer: coarse)");if(e!=null&&typeof e.matches=="boolean")return e.matches}return"ontouchstart"in window||navigator.maxTouchPoints>0||((t=navigator==null?void 0:navigator.msMaxTouchPoints)!=null?t:0)>0}catch(e){return!1}})();var r="palmer-details",m=new WeakMap;function T(t){for(let e of t){if(e.type!=="attributes")continue;let n=e.target;if(!(n instanceof HTMLDetailsElement))throw new Error(`An element with the '${r}'-attribute must be a <details>-element`);n.getAttribute(r)==null?a.destroy(n):a.create(n)}}var a=class{constructor(e){o(this,"callbacks");o(this,"details");o(this,"summary");var n;this.details=e,this.summary=(n=e.querySelector(":scope > summary"))!=null?n:void 0,this.callbacks={onKeydown:this.onKeydown.bind(this),onToggle:this.onToggle.bind(this)},this.details.addEventListener("toggle",this.callbacks.onToggle,d.passive)}onKeydown(e){e.key!=="Escape"||!this.details.open||[...this.details.querySelectorAll(`[${r}][open]`)].some(s=>s.contains(document.activeElement))||!this.details.contains(document.activeElement)||(this.details.open=!1,f(()=>{var s;return(s=this.summary)==null?void 0:s.focus()},0))}onToggle(){var e;(e=document[this.details.open?"addEventListener":"removeEventListener"])==null||e.call(document,"keydown",this.callbacks.onKeydown,d.passive)}static create(e){m.has(e)||m.set(e,new a(e))}static destroy(e){m.delete(e)}},M=new MutationObserver(T);M.observe(document,{attributeFilter:[r],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0});f(()=>{let t=Array.from(document.querySelectorAll(`[${r}]`));for(let e of t)e.setAttribute(r,"")},0);})();
