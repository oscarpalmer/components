"use strict";(()=>{var y=Object.defineProperty;var g=(t,e,n)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var i=(t,e,n)=>(g(t,typeof e!="symbol"?e+"":e,n),n);var c=Math.round(16.666666666666668),E=cancelAnimationFrame!=null?cancelAnimationFrame:function(t){clearTimeout==null||clearTimeout(t)},b=requestAnimationFrame!=null?requestAnimationFrame:function(t){var e;return(e=setTimeout==null?void 0:setTimeout(()=>{t(Date.now())},c))!=null?e:-1},l=class{constructor(t,e,n){i(this,"callback");i(this,"count");i(this,"frame");i(this,"running",!1);i(this,"time");let r=this instanceof u,a=r?"repeated":"waited";if(typeof t!="function")throw new Error(`A ${a} timer must have a callback function`);if(typeof e!="number"||e<0)throw new Error(`A ${a} timer must have a non-negative number as its time`);if(r&&(typeof n!="number"||n<2))throw new Error("A repeated timer must have a number above 1 as its repeat count");this.callback=t,this.count=n,this.time=e}get active(){return this.running}static run(t){t.running=!0;let e=0,n;function r(a){if(!t.running)return;n!=null||(n=a);let p=a-n,h=p-c,v=p+c;if(h<t.time&&t.time<v)if(t.running&&t.callback(t instanceof u?e:void 0),e+=1,t instanceof u&&e<t.count)n=void 0;else{t.stop();return}t.frame=b(r)}t.frame=b(r)}restart(){return this.stop(),l.run(this),this}start(){return this.running?this:(l.run(this),this)}stop(){return this.running=!1,typeof this.frame=="undefined"?this:(E(this.frame),this.frame=void 0,this)}},u=class extends l{},w=class extends l{constructor(t,e){super(t,e,1)}};function d(t,e){return new w(t,e).start()}var f={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}},T=['[contenteditable]:not([contenteditable="false"])',"[href]","[tabindex]:not(slot)","audio[controls]","button","details","details[open] > summary","embed","iframe","input","object","select","textarea","video[controls]"],K=T.map(t=>`${t}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",");var s="delicious-details",m=new WeakMap;function M(t){for(let e of t){if(e.type!=="attributes")continue;let n=e.target;if(!(n instanceof HTMLDetailsElement))throw new Error(`An element with the '${s}'-attribute must be a <details>-element`);n.getAttribute(s)==null?o.destroy(n):o.create(n)}}var o=class{constructor(e){i(this,"callbacks");i(this,"details");i(this,"summary");var n;this.details=e,this.summary=(n=e.querySelector(":scope > summary"))!=null?n:void 0,this.callbacks={onKeydown:this.onKeydown.bind(this),onToggle:this.onToggle.bind(this)},this.details.addEventListener("toggle",this.callbacks.onToggle,f.passive)}onKeydown(e){e.key!=="Escape"||!this.details.open||[...this.details.querySelectorAll(`[${s}][open]`)].some(r=>r.contains(document.activeElement))||!this.details.contains(document.activeElement)||(this.details.open=!1,d(()=>{var r;return(r=this.summary)==null?void 0:r.focus()},0))}onToggle(){var e;(e=document[this.details.open?"addEventListener":"removeEventListener"])==null||e.call(document,"keydown",this.callbacks.onKeydown,f.passive)}static create(e){m.has(e)||m.set(e,new o(e))}static destroy(e){m.delete(e)}},L=new MutationObserver(M);L.observe(document,{attributeFilter:[s],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0});d(()=>{let t=Array.from(document.querySelectorAll(`[${s}]`));for(let e of t)e.setAttribute(s,"")},0);})();
