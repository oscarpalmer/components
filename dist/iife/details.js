(()=>{var w=Object.defineProperty;var x=(t,e,n)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var c=(t,e,n)=>(x(t,typeof e!="symbol"?e+"":e,n),n);var S=Object.defineProperty,_=(t,e,n)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,l=(t,e,n)=>(_(t,typeof e!="symbol"?e+"":e,n),n),u=Math.round(1e3/60),m=globalThis.requestAnimationFrame??function(t){return setTimeout?.(()=>{t(Date.now())},u)};function b(t){t.state.active=!0,t.state.finished=!1;let e=t instanceof y,n=0,s;function o(a){if(!t.state.active)return;s??(s=a);let p=a-s,v=p-u,T=p+u;if(v<t.configuration.time&&t.configuration.time<T)if(t.state.active&&t.callbacks.default(e?n:void 0),n+=1,e&&n<t.configuration.count)s=void 0;else{t.state.finished=!0,t.stop();return}t.state.frame=m(o)}t.state.frame=m(o)}var g=class{constructor(t,e,n,s){l(this,"callbacks"),l(this,"configuration"),l(this,"state");let o=this instanceof y,a=o?"repeated":"waited";if(typeof t!="function")throw new TypeError(`A ${a} timer must have a callback function`);if(typeof e!="number"||e<0)throw new TypeError(`A ${a} timer must have a non-negative number as its time`);if(o&&(typeof n!="number"||n<2))throw new TypeError("A repeated timer must have a number above 1 as its repeat count");if(o&&s!==void 0&&typeof s!="function")throw new TypeError("A repeated timer's after-callback must be a function");this.configuration={count:n,time:e},this.callbacks={after:s,default:t},this.state={active:!1,finished:!1,frame:null}}get active(){return this.state.active}get finished(){return!this.active&&this.state.finished}restart(){return this.stop(),b(this),this}start(){return this.state.active||b(this),this}stop(){return this.state.active=!1,this.state.frame===void 0?this:((globalThis.cancelAnimationFrame??clearTimeout)?.(this.state.frame),this.callbacks.after?.(this.finished),this.state.frame=void 0,this)}},y=class extends g{},E=class extends g{constructor(t,e){super(t,e,1,null)}};function f(t,e){return new E(t,e).start()}var h={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}};var r="palmer-details",d=new WeakMap;function A(t){for(let e of t)if(e.type==="attributes"){if(!(e.target instanceof HTMLDetailsElement))throw new TypeError(`An element with the '${r}'-attribute must be a <details>-element`);e.target.getAttribute(r)===void 0?i.destroy(e.target):i.create(e.target)}}var i=class{constructor(e){c(this,"callbacks");c(this,"details");c(this,"summary");this.details=e,this.summary=e.querySelector(":scope > summary")??void 0,this.callbacks={onKeydown:this.onKeydown.bind(this),onToggle:this.onToggle.bind(this)},this.details.addEventListener("toggle",this.callbacks.onToggle,h.passive)}onKeydown(e){e.key!=="Escape"||!this.details.open||[...this.details.querySelectorAll(`[${r}][open]`)].some(s=>s.contains(globalThis.document.activeElement))||!this.details.contains(globalThis.document.activeElement)||(this.details.open=!1,f(()=>this.summary?.focus(),0))}onToggle(){globalThis.document[this.details.open?"addEventListener":"removeEventListener"]?.("keydown",this.callbacks.onKeydown,h.passive)}static create(e){d.has(e)||d.set(e,new i(e))}static destroy(e){d.delete(e)}},M=new MutationObserver(A);M.observe(globalThis.document,{attributeFilter:[r],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0});f(()=>{let t=Array.from(globalThis.document.querySelectorAll(`[${r}]`));for(let e of t)e.setAttribute(r,"")},0);})();
