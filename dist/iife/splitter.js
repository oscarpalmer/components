"use strict";(()=>{var y=Object.defineProperty;var v=(e,n,t)=>n in e?y(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var a=(e,n,t)=>(v(e,typeof n!="symbol"?n+"":n,t),t);var f={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}};function s(e){return typeof e=="number"?e:Number.parseInt(typeof e=="string"?e:String(e),10)}function l(e){return(e!=null?e:"").trim().length===0}var b=["horizontal","vertical"],g=0;function x(e){var c,d;let n=document.createElement("div");l(e.primary.id)&&(e.primary.id=`spiffy_splitter_primary_${++g}`),n.setAttribute("aria-controls",e.primary.id),n.role="separator",n.tabIndex=0;let t=e.getAttribute("value");l(t)&&(t="50");let i=s(t);e.values.original=typeof i=="number"?i:50;let r=(c=e.getAttribute("max"))!=null?c:"",h=(d=e.getAttribute("min"))!=null?d:"";return r.length===0&&u(e,n,"maximum",100),h.length===0&&u(e,n,"minimum",0),o(e,n,e.values.original,!1),n.addEventListener("keydown",p=>E(e,p),f.passive),n}function E(e,n){if(!["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Escape","Home"].includes(n.key)||(e.type==="vertical"?["ArrowLeft","ArrowRight"]:["ArrowDown","ArrowUp"]).includes(n.key))return;let i;switch(n.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":i=e.value+(["ArrowLeft","ArrowUp"].includes(n.key)?-1:1);break;case"End":case"Home":i=n.key==="End"?e.values.maximum:e.values.minimum;break;case"Escape":i=e.values.original;break;default:break}o(e,e.separator,i,!0)}function u(e,n,t,i){let r=s(i);Number.isNaN(r)||r===e.values[t]||t==="maximum"&&r<e.values.minimum||t==="minimum"&&r>e.values.maximum||(t==="maximum"&&r>100?r=100:t==="minimum"&&r<0&&(r=0),e.values[t]=r,n.setAttribute(t==="maximum"?"aria-valuemax":"aria-valuemin",r),(t==="maximum"&&r<e.values.current||t==="minimum"&&r>e.values.current)&&o(e,n,r,!0))}function o(e,n,t,i){let r=s(t);Number.isNaN(r)||r===e.values.current||(r<e.values.minimum?r=e.values.minimum:r>e.values.maximum&&(r=e.values.maximum),n.ariaValueNow=r,e.primary.style.flex=`${r/100}`,e.values.current=r,i&&e.dispatchEvent(new CustomEvent("change",{detail:{value:r}})))}var m=class extends HTMLElement{constructor(){var t;super();a(this,"primary");a(this,"secondary");a(this,"separator");a(this,"values",{current:-1,maximum:-1,minimum:-1,original:-1});if(this.children.length<2)throw new Error("A <spffy-splitter> must have at least two direct children");this.primary=this.children[0],this.secondary=[...this.children].slice(1),this.separator=x(this),(t=this.primary)==null||t.insertAdjacentElement("afterend",this.separator)}get max(){return this.values.maximum}set max(t){u(this,this.separator,"maximum",t)}get min(){return this.values.minimum}set min(t){u(this,this.separator,"minimum",t)}get type(){var i;let t=(i=this.getAttribute("type"))!=null?i:"horizontal";return b.includes(t)?t:"horizontal"}set type(t){b.includes(t)&&this.setAttribute("type",t)}get value(){return this.values.current}set value(t){o(this,this.separator,t,!0)}attributeChangedCallback(t,i,r){switch(t){case"max":case"min":u(this,this.separator,t==="max"?"maximum":"minimum",r);break;case"value":o(this,this.separator,r,!0);break;default:break}}};a(m,"observedAttributes",["max","min","value"]);customElements.define("spiffy-splitter",m);})();
