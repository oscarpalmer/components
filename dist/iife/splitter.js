"use strict";(()=>{var y=Object.defineProperty;var v=(e,n,t)=>n in e?y(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var a=(e,n,t)=>(v(e,typeof n!="symbol"?n+"":n,t),t);var d={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}},g=['[contenteditable]:not([contenteditable="false"])',"[href]","[tabindex]:not(slot)","audio[controls]","button","details","details[open] > summary","embed","iframe","input","object","select","textarea","video[controls]"],T=g.map(e=>`${e}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",");function o(e,n,t){let i=e.getAttribute(n);return i==null||i.trim().length===0?t:i}function m(e){return typeof e=="number"?e:Number.parseInt(typeof e=="string"?e:String(e),10)}function f(e){return(e!=null?e:"").trim().length===0}function l(e,n,t){t==null?e.removeAttribute(n):e.setAttribute(n,String(t))}var b=["horizontal","vertical"],x=0;function E(e){let n=document.createElement("div");f(e.primary.id)&&(e.primary.id=`spiffy_splitter_primary_${++x}`),l(n,"aria-controls",e.primary.id),n.role="separator",n.tabIndex=0;let t=o(e,"value","50"),i=m(t);e.values.original=typeof i=="number"?i:50;let r=o(e,"max",""),p=o(e,"min","");return r.length===0&&s(e,n,"maximum",100),p.length===0&&s(e,n,"minimum",0),u(e,n,e.values.original,!1),n.addEventListener("keydown",h=>w(e,h),d.passive),n}function w(e,n){if(!["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Escape","Home"].includes(n.key)||(e.type==="vertical"?["ArrowLeft","ArrowRight"]:["ArrowDown","ArrowUp"]).includes(n.key))return;let i;switch(n.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":i=e.value+(["ArrowLeft","ArrowUp"].includes(n.key)?-1:1);break;case"End":case"Home":i=n.key==="End"?e.values.maximum:e.values.minimum;break;case"Escape":i=e.values.original;break;default:break}u(e,e.separator,i,!0)}function s(e,n,t,i){let r=m(i);Number.isNaN(r)||r===e.values[t]||t==="maximum"&&r<e.values.minimum||t==="minimum"&&r>e.values.maximum||(t==="maximum"&&r>100?r=100:t==="minimum"&&r<0&&(r=0),e.values[t]=r,l(n,t==="maximum"?"aria-valuemax":"aria-valuemin",r),(t==="maximum"&&r<e.values.current||t==="minimum"&&r>e.values.current)&&u(e,n,r,!0))}function u(e,n,t,i){let r=m(t);Number.isNaN(r)||r===e.values.current||(r<e.values.minimum?r=e.values.minimum:r>e.values.maximum&&(r=e.values.maximum),n.ariaValueNow=String(r),e.primary.style.flex=`${r/100}`,e.values.current=r,i&&e.dispatchEvent(new CustomEvent("change",{detail:{value:r}})))}var c=class extends HTMLElement{constructor(){var t;super();a(this,"primary");a(this,"secondary");a(this,"separator");a(this,"values",{current:-1,maximum:-1,minimum:-1,original:-1});if(this.children.length<2)throw new Error("A <spffy-splitter> must have at least two direct children");this.primary=this.children[0],this.secondary=[...this.children].slice(1),this.separator=E(this),(t=this.primary)==null||t.insertAdjacentElement("afterend",this.separator)}get max(){return this.values.maximum}set max(t){s(this,this.separator,"maximum",t)}get min(){return this.values.minimum}set min(t){s(this,this.separator,"minimum",t)}get type(){let t=o(this,"type","horizontal");return b.includes(t)?t:"horizontal"}set type(t){b.includes(t)&&l(this,"type",t)}get value(){return this.values.current}set value(t){u(this,this.separator,t,!0)}attributeChangedCallback(t,i,r){switch(t){case"max":case"min":s(this,this.separator,t==="max"?"maximum":"minimum",r);break;case"value":u(this,this.separator,r,!0);break;default:break}}};a(c,"observedAttributes",["max","min","value"]);globalThis.customElements.define("spiffy-splitter",c);})();
