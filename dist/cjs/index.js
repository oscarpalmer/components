"use strict";var V=Object.defineProperty;var K=(a,e,t)=>e in a?V(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var g=(a,e,t)=>(K(a,typeof e!="symbol"?e+"":e,t),t);var p={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}},A=["[href]","[tabindex]","button","input","select","textarea"].map(a=>`${a}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",");function b(a){var e;return(e=requestAnimationFrame==null?void 0:requestAnimationFrame(a))!=null?e:setTimeout==null?void 0:setTimeout(()=>{a(Date.now())},16)}function O(a,e){let t=a==null?void 0:a.parentElement;for(;t!=null;){if(t===document.body)return;if(e(t))break;t=t.parentElement}return t!=null?t:void 0}function D(a){var i;let e=[],t=Array.from(a.querySelectorAll(A));for(let n of t){let s=(i=window==null?void 0:window.getComputedStyle)==null?void 0:i.call(window,n);(s==null||s.display!=="none"&&s.visibility!=="hidden")&&e.push(n)}return e}function W(){return URL.createObjectURL(new Blob).replace(/^.*\/([\w-]+)$/,"$1").replace(/-/g,"_")}var u=class{static getChildren(e){return Array.from(e.querySelectorAll(":scope > delicious-details > details, :scope > details"))}static onKeydown(e){var d;if(e.isComposing||e.key!=="ArrowDown"&&e.key!=="ArrowUp"||!(this instanceof x))return;let{target:t}=e;if(!(t instanceof HTMLElement))return;let i=(d=h.list.children.get(this))!=null?d:[],n=t.parentElement,s=i.indexOf(n);if(s===-1)return;let o=s+(e.key==="ArrowDown"?1:-1);o<0?o=i.length-1:o>=i.length&&(o=0);let l=i[o],r=l==null?void 0:l.querySelector(":scope > summary");r==null||r.focus()}static onKeyup(e){if(e.key!=="Escape")return;let{containers:t}=h.details,i=O(document.activeElement,n=>{var s,o;return t.has(n)&&((o=(s=t.get(n))==null?void 0:s.open)!=null?o:!0)});i instanceof T&&u.onToggle.call(i,!1)}static onToggle(e){var s;if(!(this instanceof T))return;let{buttons:t,containers:i}=h.details,n=i.get(this);n!=null&&(n.open=e!=null?e:!n.open,n.open||(s=t.get(this))==null||s.focus())}static open(e,t){if(t==null)return;if(t.length>0&&!/^[\s\d,]+$/.test(t))throw new Error("The 'selected'-attribute of a 'delicious-details-list'-element must be a comma-separated string of numbers, e.g. '', '0' or '0,1,2'");let i=t.length>0?t.split(",").filter(n=>n.trim().length>0).map(n=>Number.parseInt(n,10)):[];u.update(e,i)}static update(e,t){var r,d;if(typeof t=="undefined")return;let{children:i,observer:n,open:s}=h.list,o=t.filter((c,f,y)=>y.indexOf(c)===f).sort((c,f)=>c-f);if(e.multiple||(o=o.length>0&&o[0]!=null?o.length>1?[o[0]]:o:[]),o.every((c,f)=>e.open[f]===c))return;(r=n.get(e))==null||r.disconnect();let l=(d=i.get(e))!=null?d:[];for(let c of l)o.includes(l.indexOf(c))!==c.open&&(c.open=!c.open);s.set(e,o),b(()=>{o.length===0?e.removeAttribute("open"):e.setAttribute("open",o.join(",")),b(()=>{var c;return(c=n.get(e))==null?void 0:c.observe(e,w.options)})})}},w=class{static callback(e,t){var f,y,R;if(t.length===0)return;let{children:i}=h.list,n=t[0],s=Array.from((f=n==null?void 0:n.addedNodes)!=null?f:[]),o=Array.from((y=n==null?void 0:n.removedNodes)!=null?y:[]);if(s.concat(o).some(P=>P.parentElement===e)){i.set(e,u.getChildren(e));return}if((n==null?void 0:n.type)!=="attributes"||!((n==null?void 0:n.target)instanceof HTMLDetailsElement))return;let l=n.target,d=((R=i.get(e))!=null?R:[]).indexOf(l);if(d===-1)return;let c=[];e.multiple?c=l.open?e.open.concat([d]):e.open.filter(P=>P!==d):c=l.open?[d]:[],u.update(e,c)}};g(w,"options",{attributeFilter:["open"],attributes:!0,childList:!0,subtree:!0});var h=class{};g(h,"details",{buttons:new WeakMap,containers:new WeakMap}),g(h,"list",{children:new WeakMap,observer:new WeakMap,open:new WeakMap});var T=class extends HTMLElement{close(){u.onToggle.call(this,!1)}connectedCallback(){let e=this.querySelector(":scope > details"),t=e==null?void 0:e.querySelector(":scope > summary");h.details.buttons.set(this,t),h.details.containers.set(this,e)}disconnectedCallback(){h.details.buttons.delete(this),h.details.containers.delete(this)}open(){u.onToggle.call(this,!0)}toggle(){u.onToggle.call(this)}},x=class extends HTMLElement{static get observedAttributes(){return["multiple","open"]}get multiple(){return this.getAttribute("multiple")!=null}set multiple(e){e?this.setAttribute("multiple",""):this.removeAttribute("multiple")}get open(){var e;return(e=h.list.open.get(this))!=null?e:[]}set open(e){u.update(this,e)}attributeChangedCallback(e,t,i){var n;if(t!==i)switch(e){case"multiple":u.open(this,(n=this.getAttribute("open"))!=null?n:void 0);break;case"open":u.open(this,i);break;default:break}}connectedCallback(){var n,s;let{children:e,observer:t,open:i}=h.list;e.set(this,u.getChildren(this)),i.set(this,[]),t.set(this,new MutationObserver(o=>{w.callback(this,o)})),(n=t.get(this))==null||n.observe(this,w.options),this.addEventListener("keydown",u.onKeydown.bind(this),p.passive),u.open(this,(s=this.getAttribute("open"))!=null?s:void 0)}disconnectedCallback(){var n;let{children:e,observer:t,open:i}=h.list;e.delete(this),(n=t.get(this))==null||n.disconnect(),t.delete(this),i.delete(this)}};addEventListener==null||addEventListener("keyup",u.onKeyup,p.passive);customElements==null||customElements.define("delicious-details",T);customElements==null||customElements.define("delicious-details-list",x);var E=class{static update(e,t,i,n){let{anchor:s,floater:o,parent:l}=e;function r(){if(n())return;let d=E.getType(l!=null?l:s,t),c=i(d,{anchor:s.getBoundingClientRect(),floater:o.getBoundingClientRect(),parent:l==null?void 0:l.getBoundingClientRect()});E.setPosition(o,c),b(r)}b(r)}static getType(e,t){let i=e.getAttribute("position"),n=i==null?void 0:i.trim().toLowerCase();return n!=null&&t.all.includes(n)?n:t.default}static setPosition(e,t){let{left:i,top:n}=t.coordinate;e.setAttribute("position",t.type),e.style.inset="0 auto auto 0",e.style.position="fixed",e.style.transform=`translate3d(${i}px, ${n}px, 0)`,e.hidden&&b(()=>{e.hidden=!1})}};var S=["any"].concat(...["above","below"].map(a=>[a,`${a}-left`,`${a}-right`])),m=class{static getPosition(e,t){let i=m.getValue(e,["left","right"],t,!0),n=m.getValue(e,["below","above"],t,!1);return e!=="any"?{coordinate:{left:i,top:n},type:["above","below"].includes(e)?`??? ${e}-${t.anchor.left===i?"left":"right"}`:e}:{coordinate:{left:i,top:n},type:"???"}}static getValue(e,t,i,n){var f;let{anchor:s,floater:o}=i,l=n?o.width:o.height,r=n?s.left:s.bottom,d=(n?s.right:s.top)-l;return t.some(y=>e.includes(y))?e.includes((f=t[0])!=null?f:"_")?r:d:r+l<=(n?window.innerWidth:window.innerHeight)||d<0?r:d}static onClick(e){var n;if(!(this instanceof L))return;let{anchor:t,floater:i}=v.getElements(this);t==null||i==null||t.getAttribute("aria-expanded")!=="true"||e.target!==t&&e.target!==i&&!((n=i==null?void 0:i.contains(e.target))!=null&&n)&&m.toggle.call(this,!1)}static onKeydown(e){var l;if(!(this instanceof L)||!(e instanceof KeyboardEvent))return;let{anchor:t,floater:i}=v.getElements(this);if(t==null||i==null||t.getAttribute("aria-expanded")!=="true"||(e.key==="Escape"&&m.toggle.call(this,!1),e.key!=="Tab"))return;e.preventDefault();let n=D(i);if(document.activeElement===i){b(()=>{var r;((r=n[e.shiftKey?n.length-1:0])!=null?r:i).focus()});return}let s=n.indexOf(document.activeElement),o=i;if(s>-1){let r=s+(e.shiftKey?-1:1);r<0?r=n.length-1:r>=n.length&&(r=0),o=(l=n[r])!=null?l:i}b(()=>{o.focus()})}static toggle(e){var r,d;if(!(this instanceof L))return;let{anchor:t,floater:i}=v.getElements(this);if(t==null||i==null)return;let n=typeof e=="boolean"?!e:t.getAttribute("aria-expanded")==="true",{click:s,keydown:o}=v.getCallbacks(this),l=n?"removeEventListener":"addEventListener";s!=null&&document[l]("click",s,p.passive),o!=null&&document[l]("keydown",o,p.active),n?(r=i.parentElement)==null||r.removeChild(i):document.body.appendChild(i),t.setAttribute("aria-expanded",String(!n)),(n?t:(d=D(i)[0])!=null?d:i).focus(),E.update({anchor:t,floater:i,parent:this},{all:S,default:"below"},m.getPosition,()=>t.getAttribute("aria-expanded")!=="true")}},v=class{static getCallbacks(e){return{click:this.values.click.get(e),keydown:this.values.keydown.get(e)}}static getElements(e){return{anchor:this.values.anchors.get(e),floater:this.values.floaters.get(e)}}static remove(e){this.values.anchors.delete(e),this.values.click.delete(e),this.values.floaters.delete(e),this.values.keydown.delete(e)}static setCallbacks(e){var t,i;(t=this.values.click)==null||t.set(e,m.onClick.bind(e)),(i=this.values.keydown)==null||i.set(e,m.onKeydown.bind(e))}static setElements(e,t,i){var n,s;(n=this.values.anchors)==null||n.set(e,t),(s=this.values.floaters)==null||s.set(e,i)}};g(v,"values",{anchors:new WeakMap,click:new WeakMap,floaters:new WeakMap,keydown:new WeakMap});var L=class extends HTMLElement{get content(){return v.getElements(this).floater}close(){m.toggle.call(this,!1)}connectedCallback(){var i;let e=this.querySelector(":scope > [polite-popover-button]"),t=this.querySelector(":scope > [polite-popover-content]");if(e==null)throw new Error("a");if(!(e instanceof HTMLButtonElement)&&e.getAttribute("role")!=="button")throw new Error("b");if(t==null)throw new Error("c");(i=t.parentElement)==null||i.removeChild(t),t.hidden=!0,t.id||t.setAttribute("id",W()),e.setAttribute("aria-controls",t.id),e.setAttribute("aria-expanded","false"),t.setAttribute("tabindex","-1"),v.setElements(this,e,t),v.setCallbacks(this),e.addEventListener("click",m.toggle.bind(this),p.passive)}disconnectedCallback(){v.remove(this)}open(){m.toggle.call(this,!0)}toggle(){m.toggle.call(this)}};customElements==null||customElements.define("polite-popover",L);var H="toasty-tooltip",C=new WeakMap,$=["above","below","horizontal","left","right","vertical"],k=class{static getPosition(e,t){let i=k.getValue(e,["horizontal","left","right"],t,!0),n=k.getValue(e,["vertical","above","below"],t,!1);return["horizontal","vertical"].includes(e)?{coordinate:{left:i,top:n},type:e==="horizontal"?i===t.anchor.right?"right":"left":n===t.anchor.bottom?"below":"above"}:{coordinate:{left:i,top:n},type:e}}static getValue(e,t,i,n){let{anchor:s,floater:o}=i,l=n?s.right:s.bottom,r=n?s.left:s.top,d=n?o.width:o.height,c=t.indexOf(e);if(c===-1)return r+(n?s.width:s.height)/2-d/2;let f=r-d;return c>0?c===1?f:l:l+d<=(n?window.innerWidth:window.innerHeight)||f<0?l:f}static observer(e){for(let t of e){if(t.type!=="attributes")continue;let i=t.target;i.getAttribute(H)==null?M.destroy(i):M.create(i)}}},M=class{constructor(e){this.anchor=e;g(this,"floater");g(this,"callbacks");g(this,"focusable");this.focusable=e.matches(A),this.callbacks={click:this.onClick.bind(this),hide:this.onHide.bind(this),key:this.onKey.bind(this),show:this.onShow.bind(this)},this.floater=this.createFloater(),this.handleCallbacks(!0)}static create(e){C.has(e)||C.set(e,new M(e))}static destroy(e){let t=C.get(e);t!=null&&(t.handleCallbacks(!1),C.delete(e))}onClick(){this.handleFloater(!1)}onHide(){this.handleFloater(!1)}onKey(e){e instanceof KeyboardEvent&&e.key==="Escape"&&this.handleFloater(!1)}onShow(){let{anchor:e,floater:t}=this;if(t.parentElement!=null)return;let i=this.getContent();i!=null&&(t.innerHTML=i.innerHTML,this.handleFloater(!0),E.update({anchor:e,floater:t},{all:$,default:"above"},k.getPosition,()=>t.parentElement==null))}createFloater(){let e=document.createElement("div");return e.setAttribute("aria-hidden","true"),e.setAttribute(`${H}-content`,""),e.hidden=!0,e}getContent(){var t,i;let e=(t=this.anchor.getAttribute("aria-describedby"))!=null?t:this.anchor.getAttribute("aria-labelledby");if(e!=null)return(i=document.getElementById(e))!=null?i:void 0}handleCallbacks(e){let{anchor:t,callbacks:i,focusable:n}=this,s=e?"addEventListener":"removeEventListener";t[s]("mouseenter",i.show,p.passive),t[s]("mouseleave",i.hide,p.passive),t[s]("touchstart",i.show,p.passive),n&&(t[s]("blur",i.hide,p.passive),t[s]("focus",i.show,p.passive))}handleFloater(e){var s;let{callbacks:t,floater:i}=this,n=e?"addEventListener":"removeEventListener";document[n]("keydown",t.key,p.passive),document[n]("pointerdown",t.click,p.passive),e?document.body.appendChild(i):(s=this.floater.parentElement)==null||s.removeChild(this.floater)}},F=new MutationObserver(k.observer);F.observe(document,{attributeFilter:[H],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0});b(()=>{let a=Array.from(document.querySelectorAll(`[${H}]`));for(let e of a)e.setAttribute(H,"")});
