"use strict";var c=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var L=(n,t,e)=>t in n?c(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var M=(n,t)=>{for(var e in t)c(n,e,{get:t[e],enumerable:!0})},H=(n,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of x(t))!v.call(n,r)&&r!==e&&c(n,r,{get:()=>t[r],enumerable:!(o=h(t,r))||o.enumerable});return n};var A=n=>H(c({},"__esModule",{value:!0}),n);var m=(n,t,e)=>(L(n,typeof t!="symbol"?t+"":t,e),e);var O={};M(O,{attribute:()=>l});module.exports=A(O);var y={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}},w=['[contenteditable]:not([contenteditable="false"])',"[href]","[tabindex]:not(slot)","audio[controls]","button","details","details[open] > summary","input","select","textarea","video[controls]"],S=w.map(n=>`${n}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",");function d(n){var t,e,o;return(o=(t=globalThis.requestAnimationFrame)==null?void 0:t.call(globalThis,n))!=null?o:(e=globalThis.setTimeout)==null?void 0:e.call(globalThis,()=>{n(Date.now())},16)}function T(n,t){let e=typeof t=="string";if(e?n.matches(t):t(n))return n;let o=n==null?void 0:n.parentElement;for(;o!=null;){if(o===document.body)return;if(e?o.matches(t):t(o))break;o=o.parentElement}return o!=null?o:void 0}function E(n){var o;let t=[],e=Array.from(n.querySelectorAll(S));for(let r of e){let s=(o=globalThis.getComputedStyle)==null?void 0:o.call(globalThis,r);(s==null||s.display!=="none"&&s.visibility!=="hidden")&&t.push(r)}return t}function b(n,t,e){e==null?n.removeAttribute(t):n.setAttribute(t,String(e))}var l="formal-focus-trap",f=new WeakMap,u=class{static observer(t){for(let e of t){if(e.type!=="attributes")continue;let o=e.target;o.getAttribute(l)==null?a.destroy(o):a.create(o)}}static onKeydown(t){if(t.key!=="Tab")return;let e=t.target,o=T(e,`[${l}]`);o!=null&&(t.preventDefault(),t.stopImmediatePropagation(),u.handle(t,o,e))}static handle(t,e,o){var g;let r=E(e);if(o===e){d(()=>{var i;((i=r[t.shiftKey?r.length-1:0])!=null?i:e).focus()});return}let s=r.indexOf(o),p=e;if(s>-1){let i=s+(t.shiftKey?-1:1);i<0?i=r.length-1:i>=r.length&&(i=0),p=(g=r[i])!=null?g:e}d(()=>{p.focus()})}},a=class{constructor(t){m(this,"tabIndex");this.tabIndex=t.tabIndex,b(t,"tabindex","-1")}static create(t){f.has(t)||f.set(t,new a(t))}static destroy(t){let e=f.get(t);e!=null&&(b(t,"tabindex",e.tabIndex),f.delete(t))}};(()=>{if(typeof globalThis._formalFocusTrap!="undefined")return;globalThis._formalFocusTrap=null,new MutationObserver(u.observer).observe(document,{attributeFilter:[l],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0}),d(()=>{let t=Array.from(document.querySelectorAll(`[${l}]`));for(let e of t)e.setAttribute(l,"")}),document.addEventListener("keydown",u.onKeydown,y.active)})();
