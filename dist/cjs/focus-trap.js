"use strict";var c=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var L=Object.prototype.hasOwnProperty;var M=(n,t,e)=>t in n?c(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var v=(n,t)=>{for(var e in t)c(n,e,{get:t[e],enumerable:!0})},H=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of x(t))!L.call(n,o)&&o!==e&&c(n,o,{get:()=>t[o],enumerable:!(r=h(t,o))||r.enumerable});return n};var A=n=>H(c({},"__esModule",{value:!0}),n);var m=(n,t,e)=>(M(n,typeof t!="symbol"?t+"":t,e),e);var S={};v(S,{attribute:()=>u});module.exports=A(S);var y={active:{capture:!1,passive:!1},passive:{capture:!1,passive:!0}},w=["[href]","[tabindex]","button","input","select","textarea"].map(n=>`${n}:not([disabled]):not([hidden]):not([tabindex="-1"])`).join(",");function d(n){var t,e,r;return(r=(t=globalThis.requestAnimationFrame)==null?void 0:t.call(globalThis,n))!=null?r:(e=globalThis.setTimeout)==null?void 0:e.call(globalThis,()=>{n(Date.now())},16)}function T(n,t){let e=typeof t=="string";if(e?n.matches(t):t(n))return n;let r=n==null?void 0:n.parentElement;for(;r!=null;){if(r===document.body)return;if(e?r.matches(t):t(r))break;r=r.parentElement}return r!=null?r:void 0}function E(n){var r;let t=[],e=Array.from(n.querySelectorAll(w));for(let o of e){let s=(r=globalThis.getComputedStyle)==null?void 0:r.call(globalThis,o);(s==null||s.display!=="none"&&s.visibility!=="hidden")&&t.push(o)}return t}function b(n,t,e){e==null?n.removeAttribute(t):n.setAttribute(t,String(e))}var u="formal-focus-trap",f=new WeakMap,l=class{static observer(t){for(let e of t){if(e.type!=="attributes")continue;let r=e.target;r.getAttribute(u)==null?a.destroy(r):a.create(r)}}static onKeydown(t){if(t.key!=="Tab")return;let e=t.target,r=T(e,`[${u}]`);r!=null&&(t.preventDefault(),t.stopImmediatePropagation(),l.handle(t,r,e))}static handle(t,e,r){var p;let o=E(e);if(r===e){d(()=>{var i;((i=o[t.shiftKey?o.length-1:0])!=null?i:e).focus()});return}let s=o.indexOf(r),g=e;if(s>-1){let i=s+(t.shiftKey?-1:1);i<0?i=o.length-1:i>=o.length&&(i=0),g=(p=o[i])!=null?p:e}d(()=>{g.focus()})}},a=class{constructor(t){m(this,"tabIndex");this.tabIndex=t.tabIndex,b(t,"tabindex","-1")}static create(t){f.has(t)||f.set(t,new a(t))}static destroy(t){let e=f.get(t);e!=null&&(b(t,"tabindex",e.tabIndex),f.delete(t))}};(()=>{if(typeof globalThis._formalFocusTrap!="undefined")return;globalThis._formalFocusTrap=null,new MutationObserver(l.observer).observe(document,{attributeFilter:[u],attributeOldValue:!0,attributes:!0,childList:!0,subtree:!0}),d(()=>{let t=Array.from(document.querySelectorAll(`[${u}]`));for(let e of t)e.setAttribute(u,"")}),document.addEventListener("keydown",l.onKeydown,y.active)})();
